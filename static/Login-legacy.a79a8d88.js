!function(){function n(n,t,a,o,r,e,i){try{var u=n[e](i),l=u.value}catch(c){return void a(c)}u.done?t(l):Promise.resolve(l).then(o,r)}function t(t){return function(){var a=this,o=arguments;return new Promise((function(r,e){var i=t.apply(a,o);function u(t){n(i,r,e,u,l,"next",t)}function l(t){n(i,r,e,u,l,"throw",t)}u(void 0)}))}}function a(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var a=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==a)return;var o,r,e=[],i=!0,u=!1;try{for(a=a.call(n);!(i=(o=a.next()).done)&&(e.push(o.value),!t||e.length!==t);i=!0);}catch(l){u=!0,r=l}finally{try{i||null==a.return||a.return()}finally{if(u)throw r}}return e}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return o(n,t);var a=Object.prototype.toString.call(n).slice(8,-1);"Object"===a&&n.constructor&&(a=n.constructor.name);if("Map"===a||"Set"===a)return Array.from(n);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(n,t){(null==t||t>n.length)&&(t=n.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=n[a];return o}var r=document.createElement("style");r.innerHTML=':root{--van-button-mini-height: 24px;--van-button-mini-padding: 0 var(--van-padding-base);--van-button-mini-font-size: var(--van-font-size-xs);--van-button-small-height: 32px;--van-button-small-padding: 0 var(--van-padding-xs);--van-button-small-font-size: var(--van-font-size-sm);--van-button-normal-padding: 0 15px;--van-button-normal-font-size: var(--van-font-size-md);--van-button-large-height: 50px;--van-button-default-height: 44px;--van-button-default-line-height: 1.2;--van-button-default-font-size: var(--van-font-size-lg);--van-button-default-color: var(--van-text-color);--van-button-default-background-color: var(--van-background-color-light);--van-button-default-border-color: var(--van-border-color);--van-button-primary-color: var(--van-white);--van-button-primary-background-color: var(--van-primary-color);--van-button-primary-border-color: var(--van-primary-color);--van-button-success-color: var(--van-white);--van-button-success-background-color: var(--van-success-color);--van-button-success-border-color: var(--van-success-color);--van-button-danger-color: var(--van-white);--van-button-danger-background-color: var(--van-danger-color);--van-button-danger-border-color: var(--van-danger-color);--van-button-warning-color: var(--van-white);--van-button-warning-background-color: var(--van-warning-color);--van-button-warning-border-color: var(--van-warning-color);--van-button-border-width: var(--van-border-width-base);--van-button-border-radius: var(--van-border-radius-sm);--van-button-round-border-radius: var(--van-border-radius-max);--van-button-plain-background-color: var(--van-white);--van-button-disabled-opacity: var(--van-disabled-opacity);--van-button-icon-size: 1.2em;--van-button-loading-icon-size: 20px}.van-button{position:relative;display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;height:var(--van-button-default-height);margin:0;padding:0;font-size:var(--van-button-default-font-size);line-height:var(--van-button-default-line-height);text-align:center;border-radius:var(--van-button-border-radius);cursor:pointer;-webkit-transition:opacity var(--van-animation-duration-fast);transition:opacity var(--van-animation-duration-fast);-webkit-appearance:none}.van-button:before{position:absolute;top:50%;left:50%;width:100%;height:100%;background:var(--van-black);border:inherit;border-color:var(--van-black);border-radius:inherit;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);opacity:0;content:" "}.van-button:active:before{opacity:.1}.van-button--loading:before,.van-button--disabled:before{display:none}.van-button--default{color:var(--van-button-default-color);background:var(--van-button-default-background-color);border:var(--van-button-border-width) solid var(--van-button-default-border-color)}.van-button--primary{color:var(--van-button-primary-color);background:var(--van-button-primary-background-color);border:var(--van-button-border-width) solid var(--van-button-primary-border-color)}.van-button--success{color:var(--van-button-success-color);background:var(--van-button-success-background-color);border:var(--van-button-border-width) solid var(--van-button-success-border-color)}.van-button--danger{color:var(--van-button-danger-color);background:var(--van-button-danger-background-color);border:var(--van-button-border-width) solid var(--van-button-danger-border-color)}.van-button--warning{color:var(--van-button-warning-color);background:var(--van-button-warning-background-color);border:var(--van-button-border-width) solid var(--van-button-warning-border-color)}.van-button--plain{background:var(--van-button-plain-background-color)}.van-button--plain.van-button--primary{color:var(--van-button-primary-background-color)}.van-button--plain.van-button--success{color:var(--van-button-success-background-color)}.van-button--plain.van-button--danger{color:var(--van-button-danger-background-color)}.van-button--plain.van-button--warning{color:var(--van-button-warning-background-color)}.van-button--large{width:100%;height:var(--van-button-large-height)}.van-button--normal{padding:var(--van-button-normal-padding);font-size:var(--van-button-normal-font-size)}.van-button--small{height:var(--van-button-small-height);padding:var(--van-button-small-padding);font-size:var(--van-button-small-font-size)}.van-button__loading{color:inherit;font-size:inherit}.van-button__loading .van-loading__spinner{color:currentColor;width:var(--van-button-loading-icon-size);height:var(--van-button-loading-icon-size)}.van-button--mini{height:var(--van-button-mini-height);padding:var(--van-button-mini-padding);font-size:var(--van-button-mini-font-size)}.van-button--mini+.van-button--mini{margin-left:var(--van-padding-base)}.van-button--block{display:block;width:100%}.van-button--disabled{cursor:not-allowed;opacity:var(--van-button-disabled-opacity)}.van-button--loading{cursor:default}.van-button--round{border-radius:var(--van-button-round-border-radius)}.van-button--square{border-radius:0}.van-button__content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%}.van-button__content:before{content:" "}.van-button__icon{font-size:var(--van-button-icon-size);line-height:inherit}.van-button__icon+.van-button__text,.van-button__loading+.van-button__text,.van-button__text+.van-button__icon,.van-button__text+.van-button__loading{margin-left:var(--van-padding-base)}.van-button--hairline{border-width:0}.van-button--hairline:after{border-color:inherit;border-radius:calc(var(--van-button-border-radius) * 2)}.van-button--hairline.van-button--round:after{border-radius:var(--van-button-round-border-radius)}.van-button--hairline.van-button--square:after{border-radius:0}.login[data-v-7f1f419c]{position:fixed;left:0;right:0;top:0;bottom:0;background:#ffffff}.login h1[data-v-7f1f419c]{padding:.66667rem .32rem 1.06667rem;font-size:.8rem}.login .van-cell[data-v-7f1f419c]{padding:.32rem}.login .van-cell[data-v-7f1f419c] *{font-size:.4rem}.login .van-cell[data-v-7f1f419c] .van-field__label{color:#121212}.login .van-cell[data-v-7f1f419c] .van-field__error-message{margin-top:.13333rem;font-size:.26667rem}.login .van-cell .send-btn[data-v-7f1f419c]{color:#666}.login .submit-btn[data-v-7f1f419c]{height:1.06667rem}\n',document.head.appendChild(r),System.register(["./index-legacy.3c858737.js","./storage-legacy.8cd6be51.js","./storage-legacy.def7d2f9.js"],(function(n){"use strict";var o,r,e,i,u,l,c,v,d,s,b,f,g,m,p,h,y,w,k,x,_,z,S,P,T,B,V,C,E,I,A,j,U,q,M,O,F,W;return{setters:[function(n){o=n.c,r=n.z,e=n.U,i=n.V,u=n.n,l=n.d,c=n.W,v=n.X,d=n.h,s=n.Y,b=n.p,f=n.Z,g=n.C,m=n.t,p=n.b,h=n.$,y=n.g,w=n.D,k=n.E,x=n._,_=n.r,z=n.L,S=n.H,P=n.I,T=n.a0,B=n.a1,V=n.J,C=n.a2,E=n.a3,I=n.K,A=n.a4,j=n.G,U=n.a5,q=n.a6,M=n.a7,O=n.a8},function(n){F=n.l},function(n){W=n.S}],execute:function(){var $=a(o("button"),2),D=$[0],R=$[1],H=r({},e,{tag:i("button"),text:String,icon:String,type:i("default"),size:i("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:i("button"),loadingSize:u,loadingText:String,loadingType:String,iconPosition:i("left")}),L=l({name:D,props:H,emits:["click"],setup:function(n,t){var a=t.emit,o=t.slots,r=c(),e=function(){return n.loading?o.loading?o.loading():d(f,{size:n.loadingSize,type:n.loadingType,class:R("loading")},null):o.icon?d("div",{class:R("icon")},[o.icon()]):n.icon?d(s,{name:n.icon,class:R("icon"),classPrefix:n.iconPrefix},null):void 0},i=function(){var t;if(t=n.loading?n.loadingText:o.default?o.default():n.text)return d("span",{class:R("text")},[t])},u=function(){var t=n.color,a=n.plain;if(t){var o={color:a?t:"white"};return a||(o.background=t),t.includes("gradient")?o.border=0:o.borderColor=t,o}},l=function(t){n.loading?b(t):n.disabled||(a("click",t),r())};return function(){var t,a,o,r=n.tag,c=n.type,s=n.size,b=n.block,f=n.round,g=n.plain,m=n.square,p=n.loading,h=n.disabled,y=n.hairline,w=n.nativeType,k=n.iconPosition,x=[R([c,s,{plain:g,block:b,round:f,square:m,loading:p,disabled:h,hairline:y}]),(t={},a=v,o=y,a in t?Object.defineProperty(t,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[a]=o,t)];return d(r,{type:w,class:x,style:u(),disabled:h,onClick:l},{default:function(){return[d("div",{class:R("content")},["left"===k&&e(),i(),"right"===k&&e()])]}})}}}),N=g(L),G=a(o("form"),2),J=G[0],K=G[1],X={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:u,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:m,showErrorMessage:m,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}},Y=l({name:J,props:X,emits:["submit","failed"],setup:function(n,t){var a=t.emit,o=t.slots,r=p(h),e=r.children,i=r.linkChildren,u=function(n){return n?e.filter((function(t){return n.includes(t.name)})):e},l=function(t){return"string"==typeof t?function(n){var t=e.find((function(t){return t.name===n}));return t?new Promise((function(n,a){t.validate().then((function(t){t?a(t):n()}))})):Promise.reject()}(t):n.validateFirst?(a=t,new Promise((function(n,t){var o=[];u(a).reduce((function(n,t){return n.then((function(){if(!o.length)return t.validate().then((function(n){n&&o.push(n)}))}))}),Promise.resolve()).then((function(){o.length?t(o):n()}))}))):function(n){return new Promise((function(t,a){var o=u(n);Promise.all(o.map((function(n){return n.validate()}))).then((function(n){(n=n.filter(Boolean)).length?a(n):t()}))}))}(t);var a},c=function(n,t){e.some((function(a){return a.name===n&&(a.$el.scrollIntoView(t),!0)}))},v=function(){return e.reduce((function(n,t){return n[t.name]=t.formValue.value,n}),{})},s=function(){var t=v();l().then((function(){return a("submit",t)})).catch((function(o){a("failed",{values:t,errors:o}),n.scrollToError&&o[0].name&&c(o[0].name)}))},f=function(n){b(n),s()};return i({props:n}),y({submit:s,validate:l,getValues:v,scrollToField:c,resetValidation:function(n){"string"==typeof n&&(n=[n]),u(n).forEach((function(n){n.resetValidation()}))}}),function(){var n;return d("form",{class:K(),onSubmit:f},[null==(n=o.default)?void 0:n.call(o)])}}}),Z=g(Y),Q={checkUserExist:"".concat(k.cloudbaseApi,"/checkUserExist")};function nn(){return(nn=t(regeneratorRuntime.mark((function n(t){var a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.get("".concat(Q.checkUserExist,"?phoneNumber=").concat(t));case 3:return a=n.sent,o=a.code,n.abrupt("return","1"==o);case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return",!1);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}var tn={class:"login"},an=function(n){return T("data-v-7f1f419c"),n=n(),B(),n}((function(){return U("h1",{class:"pf-medium"},"快捷登录",-1)})),on={style:{margin:"16px"}},rn=l({setup:function(n){var t=_(""),a=_(/^1[0-9]{10}$/),o=_(""),r=_(""),e=_("获取验证码"),i=_("登录"),u=function(n){11==n.length&&function(n){return nn.apply(this,arguments)}(n).then((function(n){i.value=n?"登录":"注册"}))},l=F.getItem(W.SendTime),c=Date.now();if(l){var v=c-l;v<6e4&&s(Math.floor(v/1e3))}function s(n){e.value="".concat(n,"s");var t=setInterval((function(){e.value="".concat(--n,"s"),n<=0&&(clearInterval(t),e.value="获取验证码")}),1e3)}var b=_(null),f=function(){"获取验证码"==e.value&&b.value&&b.value.validate("手机号").then((function(){l=Date.now(),F.setItem(W.SendTime,l),s(60),C.sendPhoneCode(t.value)}))},g=V(),m=function(){function n(){var n=g.query.referrer||document.referrer||"//m.wzmxx.com";location.href=decodeURIComponent(n.toString())}"登录"==i.value?C.signInWithPhoneCodeOrPassword({phoneNumber:t.value,password:o.value}).then((function(){E("登录成功"),setTimeout((function(){n()}),1e3)})).catch((function(){E("登录失败\n请检查手机号/密码是否填写正确")})):"注册"==i.value&&C.signUpWithPhoneCode(t.value,r.value,o.value).then((function(){E("注册成功"),setTimeout((function(){n()}),1e3)})).catch((function(){E("注册失败\n请检查短信验证码是否填写正确")}))};return function(n,l){return I(),z("div",tn,[an,d(P(Z),{ref_key:"loginForm",ref:b,onSubmit:m},{default:S((function(){return[d(P(A),{modelValue:t.value,"onUpdate:modelValue":[l[0]||(l[0]=function(n){return t.value=n}),u],name:"手机号",type:"tel",label:"手机号",placeholder:"未注册过手机号将自动注册",rules:[{pattern:a.value,message:"请输入正确的手机号"}]},null,8,["modelValue","rules"]),d(P(A),{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=function(n){return o.value=n}),type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),"注册"==i.value?(I(),j(P(A),{key:0,modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=function(n){return r.value=n}),name:"短信验证码",label:"短信验证码",placeholder:"短信验证码",rules:[{required:!0,message:"请输入短信验证码"}]},{button:S((function(){return[U("div",{class:"send-btn",onClick:f},q(e.value),1)]})),_:1},8,["modelValue"])):M("",!0),U("div",on,[d(P(N),{class:"submit-btn",round:"",block:"",type:"primary","native-type":"submit",color:"注册"==i.value?"#ff5900":""},{default:S((function(){return[O(q(i.value),1)]})),_:1},8,["color"])])]})),_:1},512)])}}});n("default",x(rn,[["__scopeId","data-v-7f1f419c"]]))}}}))}();
//# sourceMappingURL=Login-legacy.a79a8d88.js.map
