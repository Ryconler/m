{"version":3,"file":"TaskList.ffc53906.js","sources":["../../src/assets/images/empty-error/icon-fail.png","../../src/views/share-service/task-list/TaskList.vue"],"sourcesContent":["export default \"__VITE_ASSET__cae1737f__\"","<template>\n  <VanTabs\n    v-model:active=\"selectedTab\"\n    class=\"tabs\"\n    style=\"--fix-bg: #ffffff\"\n    :ellipsis=\"false\"\n    sticky\n    shrink\n    @click-tab=\"tabClick\"\n  >\n    <VanTab title=\"孕产\" :name=\"ShareTaskBusinessType.Yunchan\">\n      <EmptyError\n        v-show=\"!loading && taskList[ShareTaskBusinessType.Yunchan].length == 0\"\n        type=\"empty\"\n        text=\"今日暂无分享活动~\"\n        :image=\"iconFail\"\n      >\n      </EmptyError>\n      <ShareServiceTaskItem\n        v-for=\"(item, index) in taskList[ShareTaskBusinessType.Yunchan]\"\n        :key=\"index\"\n        class=\"task-item\"\n        :task=\"item\"\n        :city-id=\"cityId\"\n      ></ShareServiceTaskItem>\n    </VanTab>\n    <VanTab title=\"成长加\" :name=\"ShareTaskBusinessType.Chengzhangjia\">\n      <EmptyError\n        v-show=\"\n          !loading && taskList[ShareTaskBusinessType.Chengzhangjia].length == 0\n        \"\n        type=\"empty\"\n        text=\"今日暂无分享活动~\"\n        :image=\"iconFail\"\n      >\n      </EmptyError>\n      <ShareServiceTaskItem\n        v-for=\"(item, index) in taskList[ShareTaskBusinessType.Chengzhangjia]\"\n        :key=\"index\"\n        class=\"task-item\"\n        :task=\"item\"\n        :city-id=\"cityId\"\n      ></ShareServiceTaskItem\n    ></VanTab>\n    <VanTab title=\"自营服务\" :name=\"ShareTaskBusinessType.Ziying\">\n      <EmptyError\n        v-show=\"!loading && taskList[ShareTaskBusinessType.Ziying].length == 0\"\n        type=\"empty\"\n        text=\"今日暂无分享活动~\"\n        :image=\"iconFail\"\n      >\n      </EmptyError>\n      <ShareServiceTaskItem\n        v-for=\"(item, index) in taskList[ShareTaskBusinessType.Ziying]\"\n        :key=\"index\"\n        class=\"task-item\"\n        :task=\"item\"\n        :city-id=\"cityId\"\n      ></ShareServiceTaskItem>\n    </VanTab>\n    <VanTab title=\"互动活动\" :name=\"ShareTaskBusinessType.Huodong\">\n      <EmptyError\n        v-show=\"!loading && taskList[ShareTaskBusinessType.Huodong].length == 0\"\n        type=\"empty\"\n        text=\"今日暂无分享活动~\"\n        :image=\"iconFail\"\n      >\n      </EmptyError>\n      <ShareServiceTaskItem\n        v-for=\"(item, index) in taskList[ShareTaskBusinessType.Huodong]\"\n        :key=\"index\"\n        class=\"task-item\"\n        :task=\"item\"\n        :city-id=\"cityId\"\n      ></ShareServiceTaskItem\n    ></VanTab>\n    <VanTab title=\"保险\" :name=\"ShareTaskBusinessType.Baoxian\">\n      <EmptyError\n        v-show=\"!loading && taskList[ShareTaskBusinessType.Baoxian].length == 0\"\n        type=\"empty\"\n        text=\"今日暂无分享活动~\"\n        :image=\"iconFail\"\n      >\n      </EmptyError>\n      <ShareServiceTaskItem\n        v-for=\"(item, index) in taskList[ShareTaskBusinessType.Baoxian]\"\n        :key=\"index\"\n        class=\"task-item\"\n        :task=\"item\"\n        :city-id=\"cityId\"\n      ></ShareServiceTaskItem>\n    </VanTab>\n  </VanTabs>\n</template>\n\n<script lang=\"ts\" setup>\nimport { Tabs as VanTabs, Tab as VanTab } from 'vant'\nimport { Ref, ref, onMounted, computed } from 'vue'\nimport { setLoading } from '@/utils'\nimport ShareServiceTaskItem from '../ShareServiceTaskItem.vue'\nimport iconFail from '@/assets/images/empty-error/icon-fail.png'\nimport { ShareTaskBusinessType, ShareTaskType } from '@/constant/shareService'\nimport { queryShareTask } from '@/api/shareService'\nimport { useLocation } from '@/composables/common'\nimport { useRoute } from 'vue-router'\n\nsetLoading(true)\n\nconst route = useRoute()\n\nconst initTab = ShareTaskBusinessType.Yunchan\nconst selectedTab = ref(initTab)\n\nconst { cityInfo } = useLocation({ districts: false })\n\nconst cityId = computed(() => {\n  return <string>route.query.cityId || cityInfo.value.cityId\n})\n\nconst loading = ref(true)\nconst taskList: Ref<{\n  [key: number]: ShareTaskType[]\n}> = ref([])\n\nonMounted(async () => {\n  taskList.value[initTab] =\n    (await queryShareTask(cityId.value)).shareTaskList || []\n  loading.value = false\n  setLoading(false)\n})\n\nconst tabClick = async (tab: { name: ShareTaskBusinessType }) => {\n  loading.value = true\n  taskList.value[tab.name] =\n    (await queryShareTask(cityId.value)).shareTaskList || []\n  loading.value = false\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.van-tabs {\n  @include vanTab(\n    $height: 84px,\n    $padding: 0 32px,\n    $background: #ffffff,\n    $activeColor: #ff397e,\n    $activeSize: 30px,\n    $inactiveColor: #15161f,\n    $inactiveSize: 30px,\n    $tabMargin: 0 40px 0 0\n  );\n  :deep(.van-tabs__line) {\n    display: none;\n  }\n  :deep(.van-tab__text) {\n    font-weight: 500 !important;\n  }\n  .van-tab__panel {\n    padding: 28px 32px;\n    .task-item {\n      margin-bottom: 24px;\n    }\n  }\n}\n</style>\n<style lang=\"scss\">\nhtml,\nbody {\n  background: #f4f5fa;\n}\n</style>\n"],"names":[],"mappings":"ssBAAA,MAAe,uDC0GJ,EAAI,OAET,GAAQ,IAER,EAAU,EAAsB,QAChC,EAAc,EAAI,CAAO,EAEzB,CAAE,YAAa,EAAY,CAAE,UAAW,GAAO,EAE/C,EAAS,EAAS,IACP,EAAM,MAAM,QAAU,EAAS,MAAM,MACrD,EAEK,EAAU,EAAI,EAAI,EAClB,EAED,EAAI,EAAE,IAED,IAAY,0BACX,MAAM,SACN,GAAe,EAAO,KAAK,GAAG,eAAiB,KAChD,MAAQ,KACL,EAAK,GACjB,OAEK,GAAW,AAAO,GAAyC,0BACvD,MAAQ,KACP,MAAM,EAAI,YACV,GAAe,EAAO,KAAK,GAAG,eAAiB,KAChD,MAAQ"}