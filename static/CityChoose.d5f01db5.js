var A=(e,f,t)=>new Promise((u,h)=>{var a=n=>{try{i(t.next(n))}catch(r){h(r)}},s=n=>{try{i(t.throw(n))}catch(r){h(r)}},i=n=>n.done?u(n.value):Promise.resolve(n.value).then(a,s);i((t=t.apply(e,f)).next())});import{c as K,t as st,n as V,m as ct,d as E,r as k,u as rt,a as it,b as at,e as L,i as lt,f as ut,o as G,w as H,g as X,h as x,T as dt,j as q,p as ft,k as ht,l as P,q as b,s as vt,v as J,x as pt,y as gt,z as yt,A as xt,B as mt,C as U,D as Ct,E as It,_ as _t,F as kt,G as j,H as Tt,I as w,J as At,K as _,L as S,M as F,N as R,O as wt}from"./index.8eff2da7.js";import{s as St}from"./city.452f4acf.js";import"./storage.ab874d93.js";function Rt(){const e="A".charCodeAt(0);return Array(26).fill("").map((t,u)=>String.fromCharCode(e+u))}const[Z,N]=K("index-bar"),Nt={sticky:st,zIndex:V,teleport:[String,Object],highlightColor:String,stickyOffsetTop:ct(0),indexList:{type:Array,default:Rt}},Q=Symbol(Z);var Lt=E({name:Z,props:Nt,emits:["select","change"],setup(e,{emit:f,slots:t}){const u=k(),h=k(""),a=rt(),s=it(u),{children:i,linkChildren:n}=at(Q);let r;n({props:e});const m=L(()=>{if(lt(e.zIndex))return{zIndex:+e.zIndex+1}}),W=L(()=>{if(e.highlightColor)return{color:e.highlightColor}}),O=(o,c)=>{for(let l=i.length-1;l>=0;l--){const v=l>0?c[l-1].height:0,d=e.sticky?v+e.stickyOffsetTop:0;if(o+d>=c[l].top)return l}return-1},$=o=>i.find(c=>String(c.index)===o),T=()=>{if(ht(u))return;const{sticky:o,indexList:c}=e,l=P(s.value),v=b(s),d=i.map(C=>C.getRect(s.value,v));let g=-1;if(r){const C=$(r);if(C){const y=C.getRect(s.value,v);g=O(y.top,d)}}else g=O(l,d);h.value=c[g],o&&i.forEach((C,y)=>{const{state:p,$el:nt}=C;if(y===g||y===g-1){const I=nt.getBoundingClientRect();p.left=I.left,p.width=I.width}else p.left=null,p.width=null;if(y===g)p.active=!0,p.top=Math.max(e.stickyOffsetTop,d[y].top-l)+v.top;else if(y===g-1&&r===""){const I=d[g].top-l;p.active=I>0,p.top=I+v.top-d[y].height}else p.active=!1}),r=""},B=()=>{q(T)};ut("scroll",T,{target:s}),G(B),H(()=>e.indexList,B),H(h,o=>{o&&f("change",o)});const tt=()=>e.indexList.map(o=>{const c=o===h.value;return x("span",{class:N("index",{active:c}),style:c?W.value:void 0,"data-index":o},[o])}),M=o=>{r=String(o);const c=$(r);if(c){const l=P(s.value),v=b(s),{offsetHeight:d}=document.documentElement;if(l===d-v.height){T();return}c.$el.scrollIntoView(),e.sticky&&e.stickyOffsetTop&&vt(J()-e.stickyOffsetTop),f("select",c.index)}},z=o=>{const{index:c}=o.dataset;c&&M(c)},et=o=>{z(o.target)};let D;const ot=o=>{if(a.move(o),a.isVertical()){ft(o);const{clientX:c,clientY:l}=o.touches[0],v=document.elementFromPoint(c,l);if(v){const{index:d}=v.dataset;d&&D!==d&&(D=d,z(v))}}},Y=()=>x("div",{class:N("sidebar"),style:m.value,onClick:et,onTouchstart:a.start,onTouchmove:ot},[tt()]);return X({scrollTo:M}),()=>{var o;return x("div",{ref:u,class:N()},[e.teleport?x(dt,{to:e.teleport},{default:()=>[Y()]}):Y(),(o=t.default)==null?void 0:o.call(t)])}}});const[Pt,bt]=K("index-anchor"),Et={index:V};var Ot=E({name:Pt,props:Et,setup(e,{slots:f}){const t=pt({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),u=k(),{parent:h}=gt(Q);if(!h)return;const a=()=>t.active&&h.props.sticky,s=L(()=>{const{zIndex:n,highlightColor:r}=h.props;if(a())return yt(xt(n),{left:t.left?`${t.left}px`:void 0,width:t.width?`${t.width}px`:void 0,transform:t.top?`translate3d(0, ${t.top}px, 0)`:void 0,color:r})});return X({state:t,getRect:(n,r)=>{const m=b(u);return t.rect.height=m.height,n===window||n===document.body?t.rect.top=m.top+J():t.rect.top=m.top+P(n)-r.top,t.rect}}),()=>{const n=a();return x("div",{ref:u,style:{height:n?`${t.rect.height}px`:void 0}},[x("div",{style:s.value,class:[bt({sticky:n}),{[mt]:n}]},[f.default?f.default():e.index])])}}});const $t=U(Ot),Bt=U(Lt),Mt={getAllCityList:`${It.mockApi}/addressview/GetAllCityList`};function zt(){return A(this,null,function*(){try{const e=yield Ct.get(`${Mt.getAllCityList}`),{data:f,errno:t}=e;return t==0?f||[]:[]}catch(e){return[]}})}const Dt=E({setup(e){const f=At(),t=k({}),u=k([]);G(()=>A(this,null,function*(){const a=yield zt();t.value={},t.value=kt.exports.groupBy(a,s=>s.PINYIN&&s.PINYIN[0]);for(const s of Object.values(t.value))s.sort((i,n)=>i.PINYIN<n.PINYIN?-1:1);u.value=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],yield q(),window.scrollTo(0,1),window.scrollTo(0,0)}));const h=a=>{St(a.ID,a.NAME);const s=f.query.referrer||document.referrer||"//m.wzmxx.com";location.href=decodeURIComponent(s.toString())};return(a,s)=>(_(),j(w(Bt),null,{default:Tt(()=>[(_(!0),S(R,null,F(u.value,i=>(_(),S(R,{key:i},[x(w($t),{index:i},null,8,["index"]),(_(!0),S(R,null,F(t.value[i],(n,r)=>(_(),j(w(wt),{key:r,title:n.NAME,onClick:m=>h(n)},null,8,["title","onClick"]))),128))],64))),128))]),_:1}))}});var Kt=_t(Dt,[["__scopeId","data-v-36919e09"]]);export{Kt as default};
//# sourceMappingURL=CityChoose.d5f01db5.js.map
