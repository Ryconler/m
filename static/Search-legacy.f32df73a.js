!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?e(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var c=e.apply(t,n);function i(e){r(c,a,o,i,u,"next",e)}function u(e){r(c,a,o,i,u,"throw",e)}i(void 0)}))}}System.register(["./index-legacy.24dc3dcd.js","./city-legacy.3f86212c.js","./storage-legacy.ca67a28d.js","./storage-legacy.8cd6be51.js"],(function(e){"use strict";var n,r,o,c,i,u,s,l,f,p,d,v,y,m;return{setters:[function(e){n=e.r,r=e.o,o=e.O,c=e.P,i=e.d,u=e.K,s=e.h,l=e.Q,f=e.J},function(e){p=e.g,d=e.s},function(e){v=e.S,y=e.C},function(e){m=e.l}],execute:function(){var b=function(e,t,n){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"==typeof t&&(n=t,t={}),t=t||{},n=n||function(){},a.type=t.type||"text/javascript",a.charset=t.charset||"utf8",a.async=!("async"in t)||!!t.async,a.src=e,t.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(a,t.attrs),t.text&&(a.text=""+t.text),("onload"in a?g:h)(a,n),a.onload||g(a,n),r.appendChild(a)};function g(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function h(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}function w(){return x.apply(this,arguments)}function x(){return(x=a(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return new Promise((function(e,t){window.AMap&&window.AMap.Map?e(window.AMap):b("//webapi.amap.com/maps?v=1.4.15&key=c740e64858e21be917b7a68d264f60bd&callback=onAMapLoaded",(function(n){n?t(null):window.onAMapLoaded=function(){e(window.AMap)}}))}))},e.next=3,t();case 3:return n=e.sent,e.abrupt("return",new Promise((function(e,t){try{if(n)new n.Map("iCenter").plugin("AMap.Geolocation",(function(){var r=new n.Geolocation({enableHighAccuracy:!0,timeout:5e3,buttonOffset:new n.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"});r.getCurrentPosition(),n.event.addListener(r,"complete",(function(t){if(console.log("geolocation",t),t&&t.addressComponent&&t.position){var n=t.addressComponent.adcode,r=t.addressComponent.city,a=r?r.replace("å¸‚",""):"",o=t.position.lat,c=t.position.lng;e(n?{cityId:n,cityName:a,lat:o,lng:c}:null)}else e(null)})),n.event.addListener(r,"error",(function(e){console.error("geolocation error",e),t(null)}))}));else e(null)}catch(r){console.error(r),t(null)}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return P.apply(this,arguments)}function P(){return P=a(regeneratorRuntime.mark((function e(){var n,r,a,o,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>0&&void 0!==c[0]?c[0]:30,e.prev=1,r=m.getItem(v.Position),a=Date.now(),!r){e.next=14;break}if(!(a-r.time<60*n*1e3)){e.next=9;break}o=r,e.next=12;break;case 9:return e.next=11,w();case 11:o=e.sent;case 12:e.next=17;break;case 14:return e.next=16,w();case 16:o=e.sent;case 17:return o&&m.setItem(v.Position,t(t({},o),{},{time:Date.now()})),e.abrupt("return",o);case 21:return e.prev=21,e.t0=e.catch(1),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[1,21]])}))),P.apply(this,arguments)}var j=function(){var e=n(null),t=n(c),i=n(!1);return r(a(regeneratorRuntime.mark((function n(){var r,a,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=o.get(y.City))){n.next=6;break}a=r.split("_"),t.value={cityId:a[0],cityName:decodeURIComponent(a[1])},n.next=17;break;case 6:return n.next=8,p();case 8:if(null==(u=n.sent)){n.next=13;break}t.value=u,n.next=17;break;case 13:return n.next=15,O();case 15:e.value=n.sent,null!=e.value?t.value={cityId:e.value.cityId,cityName:e.value.cityName}:t.value=c;case 17:d(t.value.cityId,t.value.cityName),null==e.value?O().then((function(t){e.value=t,i.value=!0})):i.value=!0;case 19:case"end":return n.stop()}}),n)})))),{position:e,cityInfo:t,locationLoaded:i}},k={class:"search"};e("default",i({setup:function(e){var t=n(c);return r(a(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=p())){e.next=5;break}t.value=n,e.next=11;break;case 5:return e.next=7,j();case 7:r=e.sent,null!=(a=r.position).value?t.value={cityId:a.value.cityId,cityName:a.value.cityName}:t.value=c,d(t.value.cityId,t.value.cityName);case 11:case"end":return e.stop()}}),e)})))),function(e,t){var n=l("SearchBar");return f(),u("div",k,[s(n,{"is-searching":""})])}}}))}}}))}();
//# sourceMappingURL=Search-legacy.f32df73a.js.map
