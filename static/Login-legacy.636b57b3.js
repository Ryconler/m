!function(){function n(n,t,a,r,o,e,i){try{var u=n[e](i),l=u.value}catch(c){return void a(c)}u.done?t(l):Promise.resolve(l).then(r,o)}function t(t){return function(){var a=this,r=arguments;return new Promise((function(o,e){var i=t.apply(a,r);function u(t){n(i,o,e,u,l,"next",t)}function l(t){n(i,o,e,u,l,"throw",t)}u(void 0)}))}}function a(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var a=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==a)return;var r,o,e=[],i=!0,u=!1;try{for(a=a.call(n);!(i=(r=a.next()).done)&&(e.push(r.value),!t||e.length!==t);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==a.return||a.return()}finally{if(u)throw o}}return e}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return r(n,t);var a=Object.prototype.toString.call(n).slice(8,-1);"Object"===a&&n.constructor&&(a=n.constructor.name);if("Map"===a||"Set"===a)return Array.from(n);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=n[a];return r}var o=document.createElement("style");o.innerHTML=':root{--van-button-mini-height: .32rem;--van-button-mini-padding: 0 var(--van-padding-base);--van-button-mini-font-size: var(--van-font-size-xs);--van-button-small-height: .42667rem;--van-button-small-padding: 0 var(--van-padding-xs);--van-button-small-font-size: var(--van-font-size-sm);--van-button-normal-padding: 0 .2rem;--van-button-normal-font-size: var(--van-font-size-md);--van-button-large-height: .66667rem;--van-button-default-height: .58667rem;--van-button-default-line-height: 1.2;--van-button-default-font-size: var(--van-font-size-lg);--van-button-default-color: var(--van-text-color);--van-button-default-background-color: var(--van-background-color-light);--van-button-default-border-color: var(--van-border-color);--van-button-primary-color: var(--van-white);--van-button-primary-background-color: var(--van-primary-color);--van-button-primary-border-color: var(--van-primary-color);--van-button-success-color: var(--van-white);--van-button-success-background-color: var(--van-success-color);--van-button-success-border-color: var(--van-success-color);--van-button-danger-color: var(--van-white);--van-button-danger-background-color: var(--van-danger-color);--van-button-danger-border-color: var(--van-danger-color);--van-button-warning-color: var(--van-white);--van-button-warning-background-color: var(--van-warning-color);--van-button-warning-border-color: var(--van-warning-color);--van-button-border-width: var(--van-border-width-base);--van-button-border-radius: var(--van-border-radius-sm);--van-button-round-border-radius: var(--van-border-radius-max);--van-button-plain-background-color: var(--van-white);--van-button-disabled-opacity: var(--van-disabled-opacity);--van-button-icon-size: 1.2em;--van-button-loading-icon-size: .26667rem}.van-button{position:relative;display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;height:var(--van-button-default-height);margin:0;padding:0;font-size:var(--van-button-default-font-size);line-height:var(--van-button-default-line-height);text-align:center;border-radius:var(--van-button-border-radius);cursor:pointer;-webkit-transition:opacity var(--van-animation-duration-fast);transition:opacity var(--van-animation-duration-fast);-webkit-appearance:none}.van-button:before{position:absolute;top:50%;left:50%;width:100%;height:100%;background:var(--van-black);border:inherit;border-color:var(--van-black);border-radius:inherit;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);opacity:0;content:" "}.van-button:active:before{opacity:.1}.van-button--loading:before,.van-button--disabled:before{display:none}.van-button--default{color:var(--van-button-default-color);background:var(--van-button-default-background-color);border:var(--van-button-border-width) solid var(--van-button-default-border-color)}.van-button--primary{color:var(--van-button-primary-color);background:var(--van-button-primary-background-color);border:var(--van-button-border-width) solid var(--van-button-primary-border-color)}.van-button--success{color:var(--van-button-success-color);background:var(--van-button-success-background-color);border:var(--van-button-border-width) solid var(--van-button-success-border-color)}.van-button--danger{color:var(--van-button-danger-color);background:var(--van-button-danger-background-color);border:var(--van-button-border-width) solid var(--van-button-danger-border-color)}.van-button--warning{color:var(--van-button-warning-color);background:var(--van-button-warning-background-color);border:var(--van-button-border-width) solid var(--van-button-warning-border-color)}.van-button--plain{background:var(--van-button-plain-background-color)}.van-button--plain.van-button--primary{color:var(--van-button-primary-background-color)}.van-button--plain.van-button--success{color:var(--van-button-success-background-color)}.van-button--plain.van-button--danger{color:var(--van-button-danger-background-color)}.van-button--plain.van-button--warning{color:var(--van-button-warning-background-color)}.van-button--large{width:100%;height:var(--van-button-large-height)}.van-button--normal{padding:var(--van-button-normal-padding);font-size:var(--van-button-normal-font-size)}.van-button--small{height:var(--van-button-small-height);padding:var(--van-button-small-padding);font-size:var(--van-button-small-font-size)}.van-button__loading{color:inherit;font-size:inherit}.van-button__loading .van-loading__spinner{color:currentColor;width:var(--van-button-loading-icon-size);height:var(--van-button-loading-icon-size)}.van-button--mini{height:var(--van-button-mini-height);padding:var(--van-button-mini-padding);font-size:var(--van-button-mini-font-size)}.van-button--mini+.van-button--mini{margin-left:var(--van-padding-base)}.van-button--block{display:block;width:100%}.van-button--disabled{cursor:not-allowed;opacity:var(--van-button-disabled-opacity)}.van-button--loading{cursor:default}.van-button--round{border-radius:var(--van-button-round-border-radius)}.van-button--square{border-radius:0}.van-button__content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%}.van-button__content:before{content:" "}.van-button__icon{font-size:var(--van-button-icon-size);line-height:inherit}.van-button__icon+.van-button__text,.van-button__loading+.van-button__text,.van-button__text+.van-button__icon,.van-button__text+.van-button__loading{margin-left:var(--van-padding-base)}.van-button--hairline{border-width:0}.van-button--hairline:after{border-color:inherit;border-radius:calc(var(--van-button-border-radius) * 2)}.van-button--hairline.van-button--round:after{border-radius:var(--van-button-round-border-radius)}.van-button--hairline.van-button--square:after{border-radius:0}[data-v-7f1f419c]:root{--van-padding-base:.10666rem !important;--van-padding-xs:.21334rem !important;--van-padding-sm:.32rem !important;--van-padding-md:.42666rem !important;--van-padding-lg:.64rem !important;--van-padding-xl:.85334rem !important;--van-font-size-xs:.26666rem !important;--van-font-size-sm:.32rem !important;--van-font-size-md:.37334rem !important;--van-font-size-lg:.42666rem !important;--van-line-height-xs:.37334rem !important;--van-line-height-sm:.48rem !important;--van-line-height-md:.53334rem !important;--van-line-height-lg:.58666rem !important;--van-border-width-base:.02666rem !important;--van-border-radius-sm:.05334rem !important;--van-border-radius-md:.10666rem !important;--van-border-radius-lg:.21334rem !important;--van-border-radius-max:26.64rem !important;--van-list-text-line-height:1.33334rem !important;--van-list-loading-icon-size:.42666rem !important}.login[data-v-7f1f419c]{position:fixed;left:0;right:0;top:0;bottom:0;background:#ffffff}.login h1[data-v-7f1f419c]{padding:.66667rem .32rem 1.06667rem;font-size:.8rem}.login .van-cell[data-v-7f1f419c]{padding:.32rem}.login .van-cell[data-v-7f1f419c] *{font-size:.4rem}.login .van-cell[data-v-7f1f419c] .van-field__label{color:#121212}.login .van-cell[data-v-7f1f419c] .van-field__error-message{margin-top:.13333rem;font-size:.26667rem}.login .van-cell .send-btn[data-v-7f1f419c]{color:#666}.login .submit-btn[data-v-7f1f419c]{height:1.06667rem}\n',document.head.appendChild(o),System.register(["./index-legacy.24dc3dcd.js","./storage-legacy.8cd6be51.js","./storage-legacy.ca67a28d.js","./urlPrefixes-legacy.2c514797.js"],(function(n){"use strict";var r,o,e,i,u,l,c,d,v,s,b,f,g,m,p,h,y,w,k,x,z,_,S,P,T,B,V,C,I,j,A,E,U,q,F,M,O,R;return{setters:[function(n){r=n.c,o=n.z,e=n.R,i=n.S,u=n.n,l=n.d,c=n.U,d=n.V,v=n.h,s=n.W,b=n.p,f=n.X,g=n.C,m=n.b,p=n.Y,h=n.g,y=n.t,w=n.D,k=n._,x=n.r,z=n.K,_=n.G,S=n.H,P=n.Z,T=n.$,B=n.I,V=n.a0,C=n.a1,I=n.J,j=n.a2,A=n.F,E=n.a3,U=n.a4,q=n.a5,F=n.a6},function(n){M=n.l},function(n){O=n.S},function(n){R=n.u}],execute:function(){var W=a(r("button"),2),$=W[0],D=W[1],H=o({},e,{tag:i("button"),text:String,icon:String,type:i("default"),size:i("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:i("button"),loadingSize:u,loadingText:String,loadingType:String,iconPosition:i("left")}),N=l({name:$,props:H,emits:["click"],setup:function(n,t){var a=t.emit,r=t.slots,o=c(),e=function(){return n.loading?r.loading?r.loading():v(f,{size:n.loadingSize,type:n.loadingType,class:D("loading")},null):r.icon?v("div",{class:D("icon")},[r.icon()]):n.icon?v(s,{name:n.icon,class:D("icon"),classPrefix:n.iconPrefix},null):void 0},i=function(){var t;if(t=n.loading?n.loadingText:r.default?r.default():n.text)return v("span",{class:D("text")},[t])},u=function(){var t=n.color,a=n.plain;if(t){var r={color:a?t:"white"};return a||(r.background=t),t.includes("gradient")?r.border=0:r.borderColor=t,r}},l=function(t){n.loading?b(t):n.disabled||(a("click",t),o())};return function(){var t,a,r,o=n.tag,c=n.type,s=n.size,b=n.block,f=n.round,g=n.plain,m=n.square,p=n.loading,h=n.disabled,y=n.hairline,w=n.nativeType,k=n.iconPosition,x=[D([c,s,{plain:g,block:b,round:f,square:m,loading:p,disabled:h,hairline:y}]),(t={},a=d,r=y,a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t)];return v(o,{type:w,class:x,style:u(),disabled:h,onClick:l},{default:function(){return[v("div",{class:D("content")},["left"===k&&e(),i(),"right"===k&&e()])]}})}}}),G=g(N),J=a(r("form"),2),K=J[0],L=J[1],X={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:u,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:y,showErrorMessage:y,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}},Y=l({name:K,props:X,emits:["submit","failed"],setup:function(n,t){var a=t.emit,r=t.slots,o=m(p),e=o.children,i=o.linkChildren,u=function(n){return n?e.filter((function(t){return n.includes(t.name)})):e},l=function(t){return"string"==typeof t?function(n){var t=e.find((function(t){return t.name===n}));return t?new Promise((function(n,a){t.validate().then((function(t){t?a(t):n()}))})):Promise.reject()}(t):n.validateFirst?(a=t,new Promise((function(n,t){var r=[];u(a).reduce((function(n,t){return n.then((function(){if(!r.length)return t.validate().then((function(n){n&&r.push(n)}))}))}),Promise.resolve()).then((function(){r.length?t(r):n()}))}))):function(n){return new Promise((function(t,a){var r=u(n);Promise.all(r.map((function(n){return n.validate()}))).then((function(n){(n=n.filter(Boolean)).length?a(n):t()}))}))}(t);var a},c=function(n,t){e.some((function(a){return a.name===n&&(a.$el.scrollIntoView(t),!0)}))},d=function(){return e.reduce((function(n,t){return n[t.name]=t.formValue.value,n}),{})},s=function(){var t=d();l().then((function(){return a("submit",t)})).catch((function(r){a("failed",{values:t,errors:r}),n.scrollToError&&r[0].name&&c(r[0].name)}))},f=function(n){b(n),s()};return i({props:n}),h({submit:s,validate:l,getValues:d,scrollToField:c,resetValidation:function(n){"string"==typeof n&&(n=[n]),u(n).forEach((function(n){n.resetValidation()}))}}),function(){var n;return v("form",{class:L(),onSubmit:f},[null==(n=r.default)?void 0:n.call(r)])}}}),Z=g(Y),Q={checkUserExist:"".concat(R.cloudbaseApi,"/checkUserExist")};function nn(){return(nn=t(regeneratorRuntime.mark((function n(t){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.get("".concat(Q.checkUserExist,"?phoneNumber=").concat(t));case 3:return a=n.sent,r=a.code,n.abrupt("return","1"==r);case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return",!1);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}var tn={class:"login"},an=function(n){return P("data-v-7f1f419c"),n=n(),T(),n}((function(){return E("h1",{class:"pf-medium"},"快捷登录",-1)})),rn={style:{margin:"16px"}},on=l({setup:function(n){var t=x(""),a=x(/^1[0-9]{10}$/),r=x(""),o=x(""),e=x("获取验证码"),i=x("登录"),u=function(n){11==n.length&&function(n){return nn.apply(this,arguments)}(n).then((function(n){i.value=n?"登录":"注册"}))},l=M.getItem(O.SendTime),c=Date.now();if(l){var d=c-l;d<6e4&&s(Math.floor(d/1e3))}function s(n){e.value="".concat(n,"s");var t=setInterval((function(){e.value="".concat(--n,"s"),n<=0&&(clearInterval(t),e.value="获取验证码")}),1e3)}var b=x(null),f=function(){"获取验证码"==e.value&&b.value&&b.value.validate("手机号").then((function(){l=Date.now(),M.setItem(O.SendTime,l),s(60),V.sendPhoneCode(t.value)}))},g=B(),m=function(){function n(){var n=g.query.referrer||document.referrer||"//m.wzmxx.com";location.href=decodeURIComponent(n.toString())}"登录"==i.value?V.signInWithPhoneCodeOrPassword({phoneNumber:t.value,password:r.value}).then((function(){C("登录成功"),setTimeout((function(){n()}),1e3)})).catch((function(){C("登录失败\n请检查手机号/密码是否填写正确")})):"注册"==i.value&&V.signUpWithPhoneCode(t.value,o.value,r.value).then((function(){C("注册成功"),setTimeout((function(){n()}),1e3)})).catch((function(){C("注册失败\n请检查短信验证码是否填写正确")}))};return function(n,l){return I(),z("div",tn,[an,v(S(Z),{ref_key:"loginForm",ref:b,onSubmit:m},{default:_((function(){return[v(S(j),{modelValue:t.value,"onUpdate:modelValue":[l[0]||(l[0]=function(n){return t.value=n}),u],name:"手机号",type:"tel",label:"手机号",placeholder:"未注册过手机号将自动注册",rules:[{pattern:a.value,message:"请输入正确的手机号"}]},null,8,["modelValue","rules"]),v(S(j),{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=function(n){return r.value=n}),type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),"注册"==i.value?(I(),A(S(j),{key:0,modelValue:o.value,"onUpdate:modelValue":l[2]||(l[2]=function(n){return o.value=n}),name:"短信验证码",label:"短信验证码",placeholder:"短信验证码",rules:[{required:!0,message:"请输入短信验证码"}]},{button:_((function(){return[E("div",{class:"send-btn",onClick:f},U(e.value),1)]})),_:1},8,["modelValue"])):q("",!0),E("div",rn,[v(S(G),{class:"submit-btn",round:"",block:"",type:"primary","native-type":"submit",color:"注册"==i.value?"#ff5900":""},{default:_((function(){return[F(U(i.value),1)]})),_:1},8,["color"])])]})),_:1},512)])}}});n("default",k(on,[["__scopeId","data-v-7f1f419c"]]))}}}))}();
//# sourceMappingURL=Login-legacy.636b57b3.js.map
