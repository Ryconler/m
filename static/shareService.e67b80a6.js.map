{"version":3,"file":"shareService.e67b80a6.js","sources":["../../src/api/shareService.ts"],"sourcesContent":["import urlPrefixes from '@/constant/urlPrefixes'\nimport { ajax, http } from '@/utils'\nimport jsCookie from 'js-cookie'\nimport qs from 'query-string'\nimport { ResultType } from '@/types/http'\nimport { SpuMaterialType } from '@/constant/shareService'\n\nconst api = {\n  queryShareTask: `${urlPrefixes.mockApi}/soperation-api/shareTask/queryShareTaskByCity.do`,\n  queryShareSpus: `${urlPrefixes.mockApi}/queryAggregate.do`,\n  queryShareActivities: `${urlPrefixes.mockApi}/ias-web/ifsia/activityListForTab.do`,\n  queryAllActivities: `${urlPrefixes.mockApi}/ias-web/ifsia/activityListForApp.do`,\n  queryShareInsurances: `${urlPrefixes.mockApi}/insp/channel/item/list`\n}\n\nexport async function queryShareTask(cityId: string | number): Promise<{\n  rotationPicList?: { rotationPic: string; jumpUrl: string }[]\n  shareTaskList?: any[]\n}> {\n  try {\n    // http://mytest.kapi.haiziwang.com:3003/project/1692/interface/api/45781\n    const result: ResultType<{\n      rotationPicList: { rotationPic: string; jumpUrl: string }[]\n      shareTaskList: any[]\n    }> = await ajax.get(`${api.queryShareTask}?cityId=${cityId}`)\n    const { data, code } = result\n    if (+code === 1) {\n      return data || {}\n    } else {\n      return {}\n    }\n  } catch (e) {\n    return {}\n  }\n}\n\nexport async function queryShareSpus(params: any) {\n  try {\n    // http://mytest.kapi.haiziwang.com:3003/project/1786/interface/api/26279\n    const result: ResultType<any> = await ajax.post(api.queryShareSpus, params)\n    const { data, code, msg } = result\n    if (+code === 1) {\n      return data || {}\n    } else {\n      throw msg\n    }\n  } catch (e) {\n    console.error(e)\n    throw e\n  }\n}\n\nexport async function queryShareInsurances(): Promise<{\n  ItemList: any[]\n}> {\n  try {\n    const uid = jsCookie.get('uid')\n    const skey = jsCookie.get('skey')\n    const param = qs.stringify({\n      uid,\n      skey,\n      channelKey: 'kw-yk'\n    })\n    const result: ResultType<{ ItemList: any[] }> = await http.get(\n      `${api.queryShareInsurances}?${param}`\n    )\n    const { data, code, msg } = result\n    if (+code === 1001) {\n      return data || {}\n    } else {\n      throw msg\n    }\n  } catch (e) {\n    console.error(e)\n    throw e\n  }\n}\n\nexport async function queryShareActivities(params: {\n  cityCode: string | number\n  storeCode?: string\n  lat?: string\n  lng?: string\n}) {\n  try {\n    const param = JSON.stringify(params)\n    const result: ResultType<any> = await http.get(\n      `${api.queryShareActivities}?param=${param}`\n    )\n    const { data, code, msg } = result\n    if (code == '1') {\n      return (data && data.list) || []\n    } else {\n      throw msg\n    }\n  } catch (e) {\n    console.error(e)\n    throw e\n  }\n}\n\nexport async function queryAllActivities(params: { storeCode: string }) {\n  try {\n    const param = JSON.stringify(params)\n    const result: ResultType<any> = await http.get(\n      `${api.queryAllActivities}?param=${param}`\n    )\n    const { data, code } = result\n    if (code == '1') {\n      return (data && data.list) || []\n    } else {\n      return []\n    }\n  } catch (e) {\n    console.error(e)\n    return []\n  }\n}\n"],"names":["jsCookie","qs"],"mappings":"mRAOA,KAAM,GAAM,CACV,eAAgB,GAAG,EAAY,2DAC/B,eAAgB,GAAG,EAAY,4BAC/B,qBAAsB,GAAG,EAAY,8CACrC,mBAAoB,GAAG,EAAY,8CACnC,qBAAsB,GAAG,EAAY,gCACvC,aAEqC,EAGlC,mCACG,MAEI,GAGD,KAAM,GAAK,IAAI,GAAG,EAAI,yBAAyB,GAAQ,EACtD,CAAE,OAAM,QAAS,QACnB,CAAC,GAAS,EACL,GAAQ,GAER,SAEF,SACA,GAEX,cAEqC,EAAa,mCAC5C,MAEI,GAA0B,KAAM,GAAK,KAAK,EAAI,eAAgB,CAAM,EACpE,CAAE,OAAM,OAAM,OAAQ,KACxB,CAAC,GAAS,QACL,IAAQ,QAET,SAED,iBACC,MAAM,CAAC,EACT,EAEV,eAIG,mCACG,MACI,GAAMA,EAAS,IAAI,KAAK,EACxB,EAAOA,EAAS,IAAI,MAAM,EAC1B,EAAQC,EAAG,UAAU,CACzB,MACA,OACA,WAAY,QACb,EACK,EAA0C,KAAM,GAAK,IACzD,GAAG,EAAI,wBAAwB,GACjC,EACM,CAAE,OAAM,OAAM,OAAQ,KACxB,CAAC,GAAS,WACL,IAAQ,QAET,SAED,iBACC,MAAM,CAAC,EACT,EAEV,cAE2C,EAKxC,mCACG,MACI,GAAQ,KAAK,UAAU,CAAM,EAC7B,EAA0B,KAAM,GAAK,IACzC,GAAG,EAAI,8BAA8B,GACvC,EACM,CAAE,OAAM,OAAM,OAAQ,KACxB,GAAQ,UACF,IAAQ,EAAK,MAAS,QAExB,SAED,iBACC,MAAM,CAAC,EACT,EAEV,cAEyC,EAA+B,mCAClE,MACI,GAAQ,KAAK,UAAU,CAAM,EAC7B,EAA0B,KAAM,GAAK,IACzC,GAAG,EAAI,4BAA4B,GACrC,EACM,CAAE,OAAM,QAAS,QACnB,IAAQ,IACF,GAAQ,EAAK,MAAS,GAEvB,SAEF,kBACC,MAAM,CAAC,EACR,GAEX"}