{"version":3,"file":"ShareService.92f7aabd.js","sources":["../../node_modules/vant/es/list/List.js","../../node_modules/vant/es/list/index.js","../../src/views/share-service/ShareServiceTask.vue","../../src/composables/share-service/shareServiceEarnSpu.ts","../../src/views/share-service/ShareServiceEarnSpu.vue","../../src/composables/share-service/shareServiceEarnTabYC.ts","../../src/composables/share-service/common.ts","../../src/views/share-service/ShareServiceEarnTabYC.vue","../../src/composables/share-service/shareServiceEarnTabCZJ.ts","../../src/views/share-service/ShareServiceEarnTabCZJ.vue","../../src/composables/share-service/shareServiceEarnTabZYFW.ts","../../src/views/share-service/ShareServiceEarnTabZYFW.vue","../../src/composables/share-service/shareServiceEarnTabHD.ts","../../src/views/share-service/ShareServiceEarnTabHD.vue","../../src/composables/share-service/shareServiceEarnTabBX.ts","../../src/views/share-service/ShareServiceEarnTabBX.vue","../../src/views/share-service/ShareServiceEarn.vue","../../src/views/share-service/ShareService.vue"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { ref, watch, nextTick, onUpdated, onMounted, defineComponent } from \"vue\";\nimport { isHidden, truthProp, makeStringProp, makeNumericProp, createNamespace } from \"../utils\";\nimport { useRect, useScrollParent, useEventListener } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose\";\nimport { useTabStatus } from \"../composables/use-tab-status\";\nimport { Loading } from \"../loading\";\nconst [name, bem, t] = createNamespace(\"list\");\nconst listProps = {\n  error: Boolean,\n  offset: makeNumericProp(300),\n  loading: Boolean,\n  finished: Boolean,\n  errorText: String,\n  direction: makeStringProp(\"down\"),\n  loadingText: String,\n  finishedText: String,\n  immediateCheck: truthProp\n};\nvar stdin_default = defineComponent({\n  name,\n  props: listProps,\n  emits: [\"load\", \"update:error\", \"update:loading\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const loading = ref(false);\n    const root = ref();\n    const placeholder = ref();\n    const tabStatus = useTabStatus();\n    const scrollParent = useScrollParent(root);\n    const check = () => {\n      nextTick(() => {\n        if (loading.value || props.finished || props.error || (tabStatus == null ? void 0 : tabStatus.value) === false) {\n          return;\n        }\n        const {\n          offset,\n          direction\n        } = props;\n        const scrollParentRect = useRect(scrollParent);\n        if (!scrollParentRect.height || isHidden(root)) {\n          return;\n        }\n        let isReachEdge = false;\n        const placeholderRect = useRect(placeholder);\n        if (direction === \"up\") {\n          isReachEdge = scrollParentRect.top - placeholderRect.top <= offset;\n        } else {\n          isReachEdge = placeholderRect.bottom - scrollParentRect.bottom <= offset;\n        }\n        if (isReachEdge) {\n          loading.value = true;\n          emit(\"update:loading\", true);\n          emit(\"load\");\n        }\n      });\n    };\n    const renderFinishedText = () => {\n      if (props.finished) {\n        const text = slots.finished ? slots.finished() : props.finishedText;\n        if (text) {\n          return _createVNode(\"div\", {\n            \"class\": bem(\"finished-text\")\n          }, [text]);\n        }\n      }\n    };\n    const clickErrorText = () => {\n      emit(\"update:error\", false);\n      check();\n    };\n    const renderErrorText = () => {\n      if (props.error) {\n        const text = slots.error ? slots.error() : props.errorText;\n        if (text) {\n          return _createVNode(\"div\", {\n            \"role\": \"button\",\n            \"class\": bem(\"error-text\"),\n            \"tabindex\": 0,\n            \"onClick\": clickErrorText\n          }, [text]);\n        }\n      }\n    };\n    const renderLoading = () => {\n      if (loading.value && !props.finished) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"loading\")\n        }, [slots.loading ? slots.loading() : _createVNode(Loading, {\n          \"class\": bem(\"loading-icon\")\n        }, {\n          default: () => [props.loadingText || t(\"loading\")]\n        })]);\n      }\n    };\n    watch(() => [props.loading, props.finished, props.error], check);\n    if (tabStatus) {\n      watch(tabStatus, (tabActive) => {\n        if (tabActive) {\n          check();\n        }\n      });\n    }\n    onUpdated(() => {\n      loading.value = props.loading;\n    });\n    onMounted(() => {\n      if (props.immediateCheck) {\n        check();\n      }\n    });\n    useExpose({\n      check\n    });\n    useEventListener(\"scroll\", check, {\n      target: scrollParent\n    });\n    return () => {\n      var _a;\n      const Content = (_a = slots.default) == null ? void 0 : _a.call(slots);\n      const Placeholder = _createVNode(\"div\", {\n        \"ref\": placeholder,\n        \"class\": bem(\"placeholder\")\n      }, null);\n      return _createVNode(\"div\", {\n        \"ref\": root,\n        \"role\": \"feed\",\n        \"class\": bem(),\n        \"aria-busy\": loading.value\n      }, [props.direction === \"down\" ? Content : Placeholder, renderLoading(), renderFinishedText(), renderErrorText(), props.direction === \"up\" ? Content : Placeholder]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils\";\nimport _List from \"./List\";\nconst List = withInstall(_List);\nvar stdin_default = List;\nexport {\n  List,\n  stdin_default as default\n};\n","<template>\n  <div class=\"share-service-task\">\n    <div class=\"title\">\n      <i></i>\n      <div class=\"title-text pf-medium\">今日分享活动</div>\n      <div class=\"more\" @click=\"moreClick\"></div>\n    </div>\n    <div class=\"task-list\">\n      <ShareServiceTaskItem\n        v-for=\"(item, index) in tasks.slice(0, 4)\"\n        :key=\"index\"\n        class=\"task-item\"\n        :task=\"item\"\n        :slices=\"undefined\"\n        :city-id=\"cityInfo.cityId\"\n      ></ShareServiceTaskItem>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { DefaultCity } from '@/constant/city'\nimport { ShareTaskType } from '@/constant/shareService'\nimport { CityType } from '@/types/city'\nimport { PropType, toRefs } from 'vue'\nimport ShareServiceTaskItem from './ShareServiceTaskItem.vue'\n\nconst props = defineProps({\n  cityInfo: {\n    type: Object as PropType<CityType>,\n    default() {\n      return DefaultCity\n    }\n  },\n  tasks: {\n    type: Array as PropType<ShareTaskType[]>,\n    default() {\n      return []\n    }\n  }\n})\n\nconst { cityInfo, tasks } = toRefs(props)\n\nconst moreClick = () => {\n  location.href = `/share-service/task-list?cityId=${cityInfo.value.cityId}`\n}\n</script>\n<style lang=\"scss\" scoped>\n.share-service-task {\n  .title {\n    height: 88px;\n    padding: 0 32px;\n    display: flex;\n    align-items: center;\n    i {\n      width: 8px;\n      height: 28px;\n      background: #ff397e;\n      border-radius: 4px;\n      margin-right: 16px;\n      flex: none;\n    }\n    .title-text {\n      font-size: 32px;\n      color: #15161f;\n      flex: 1;\n    }\n    .more {\n      flex: none;\n      width: 80px;\n      height: 36px;\n      background: url('@/assets/images/share-service/icon-more.png') 0 0/100%\n        100% no-repeat;\n    }\n  }\n  .task-list {\n    padding: 0 32px 8px;\n    .task-item {\n      margin-bottom: 24px;\n      &:last-child {\n        margin-bottom: 0;\n      }\n    }\n  }\n}\n</style>\n","import { ShareSpuType } from '@/constant/shareService'\nimport { getMinicardUrl, sleep, toDemotion } from '@/utils'\nimport { isNumber } from 'lodash'\nimport { ImagePreview, Toast } from 'vant'\nimport { computed, Ref } from 'vue'\n\nexport const useSpuInfo = (spu: Ref<ShareSpuType>, realSpuId: Ref<number>) => {\n  const spuLink = computed(() => {\n    return '/xbuy-event/1'\n  })\n  const spuSaleNum = computed(() => {\n    const saleNum = +(<number>spu.value.saleNum)\n    if (saleNum >= 10000) {\n      return toDemotion(saleNum, 10000) + '万'\n    }\n    if (isNumber(saleNum)) {\n      return saleNum\n    }\n    return 0\n  })\n  const spuInfoClick = async () => {\n    location.href = spuLink.value\n  }\n  return { spuLink, spuSaleNum, spuInfoClick }\n}\n\nexport const useSpuShare = (\n  spu: Ref<ShareSpuType>,\n  realSpuId: Ref<number>,\n  shareCityCode: Ref<string>\n) => {\n  const spuShareClick = async (e: Event) => {\n    e.preventDefault()\n    e.stopPropagation()\n    Toast.loading({\n      forbidClick: true,\n      duration: 0,\n      message: '加载中...'\n    })\n    const shareMinicard =\n      (await getMinicardUrl(\n        <string>spu.value.cmmdtyImage,\n        spu.value.minPrice\n      )) ||\n      spu.value.cmmdtyImage ||\n      ''\n    Toast('模拟拉起原生分享面板成功')\n    await sleep(1500)\n    ImagePreview([shareMinicard])\n  }\n  return {\n    spuShareClick\n  }\n}\n","<template>\n  <div ref=\"shareSpu\" class=\"share-spu\">\n    <div class=\"spu-info\" @click=\"spuInfoClick\">\n      <BaseImg\n        class=\"spu-image\"\n        :src=\"spu.cmmdtyImage\"\n        :width=\"186\"\n        :height=\"140\"\n      />\n      <div class=\"spu-detail\">\n        <div class=\"spu-name pf-medium\">{{ spu.spuName }}</div>\n        <div class=\"spu-function\">\n          <div class=\"spu-money\">\n            <ProductPrice3\n              class=\"spu-price\"\n              :price=\"spu.minPrice\"\n              :max-price=\"spu.maxPrice\"\n            ></ProductPrice3>\n            <div v-if=\"maxShareAmount > 0\" class=\"spu-earn\">\n              赚<template v-if=\"minShareAmount == maxShareAmount\"\n                >¥{{ getYenPrice(minShareAmount) }}</template\n              >\n              <template v-else\n                >¥{{ getYenPrice(minShareAmount) }}-¥{{\n                  getYenPrice(maxShareAmount)\n                }}</template\n              >\n            </div>\n          </div>\n          <div\n            class=\"spu-share\"\n            :class=\"spu.materialFlag && 'has-material'\"\n            @click=\"spuShareClick\"\n          >\n            <i></i>分享\n          </div>\n        </div>\n        <div class=\"spu-store\">\n          <div class=\"spu-store-name\">{{ spu.storeName }}</div>\n          <div v-if=\"spuSaleNum\" class=\"spu-sale-num\">已售{{ spuSaleNum }}</div>\n        </div>\n      </div>\n      <div v-if=\"recommended\" class=\"recommend-icon\"></div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { onMounted, PropType, Ref, ref, toRefs } from 'vue'\nimport { ShareSpuType } from '@/constant/shareService'\nimport {\n  useSpuInfo,\n  useSpuShare\n} from '@/composables/share-service/shareServiceEarnSpu'\nimport { getYenPrice } from '@/utils'\n\nconst props = defineProps({\n  spu: {\n    type: Object as PropType<ShareSpuType>,\n    default() {\n      return {}\n    }\n  },\n  /* 实际SpuId，搜索门票的spuId在businessId上 */\n  realSpuId: {\n    type: Number,\n    default: null\n  },\n  minShareAmount: {\n    type: Number,\n    default: 0\n  },\n  maxShareAmount: {\n    type: Number,\n    default: 0\n  },\n  recommended: {\n    type: Boolean,\n    default: false\n  },\n  shareCityCode: {\n    type: String,\n    default: ''\n  }\n})\nconst { spu, realSpuId, shareCityCode } = toRefs(props)\n\nconst emit = defineEmits(['inView'])\n\nconst { spuSaleNum, spuInfoClick } = useSpuInfo(spu, realSpuId)\nconst { spuShareClick } = useSpuShare(spu, realSpuId, shareCityCode)\n\nconst intersectionObserver: Ref<IntersectionObserver | null> = ref(null)\nconst shareSpu = ref()\n\nonMounted(async () => {\n  if (IntersectionObserver && shareSpu.value) {\n    intersectionObserver.value = new IntersectionObserver(entries => {\n      // If intersectionRatio is 0, the target is out of view\n      // and we do not need to do anything.\n      if (entries[0].intersectionRatio <= 0) return\n      emit('inView')\n      intersectionObserver.value?.unobserve(shareSpu.value)\n    })\n    // start observing\n    intersectionObserver.value.observe(shareSpu.value)\n  } else {\n    emit('inView')\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.share-spu {\n  .spu-info {\n    position: relative;\n    display: flex;\n    background: #ffffff;\n    border-radius: 16px;\n    padding: 24px 0 32px 24px;\n    .spu-image {\n      flex: none;\n      border-radius: 8px;\n      overflow: hidden;\n      margin-right: 20px;\n    }\n\n    .spu-detail {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      overflow: hidden;\n      .spu-name {\n        padding-right: 24px;\n        font-size: 28px;\n        color: #121212;\n        line-height: 40px;\n        @include ellipsisN(2);\n      }\n      .spu-function {\n        display: flex;\n        align-items: center;\n        padding-right: 24px;\n        .spu-money {\n          flex: 1;\n          display: flex;\n          align-items: center;\n          flex-wrap: wrap;\n\n          .spu-price {\n            margin-right: 12px;\n          }\n          .spu-earn {\n            font-size: 26px;\n            color: #fba032;\n            line-height: 32px;\n          }\n        }\n        .spu-share {\n          flex: none;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          width: 180px;\n          height: 56px;\n          font-size: 26px;\n          color: #ffffff;\n          line-height: 30px;\n          background: #ff397e;\n          border-radius: 28px;\n          position: relative;\n          i {\n            width: 28px;\n            height: 28px;\n            background: url('@/assets/images/share-service/icon-share.png') 0 0/100%\n              100% no-repeat;\n            margin-right: 8px;\n          }\n          &.has-material::after {\n            content: '有素材';\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            position: absolute;\n            width: 84px;\n            height: 28px;\n            background: url(@/assets/images/share-service/icon-has_material.png)\n              0 0/100% 100% no-repeat;\n            color: #ffffff;\n            font-size: 18px;\n            position: absolute;\n            top: -17px;\n            right: -8px;\n          }\n        }\n      }\n      .spu-store {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        overflow: hidden;\n        padding-right: 24px;\n        .spu-store-name {\n          flex: 1;\n          font-size: 22px;\n          color: #666666;\n          line-height: 28px;\n          @include ellipsis;\n        }\n        .spu-sale-num {\n          flex: none;\n          line-height: 28px;\n          font-size: 22px;\n          color: #999999;\n        }\n      }\n    }\n\n    .recommend-icon {\n      position: absolute;\n      width: 30px;\n      height: 34px;\n      top: 24px;\n      left: 32px;\n      background: url('@/assets/images/share-service/icon-recommend.png') 0 0/100%\n        100% no-repeat;\n    }\n  }\n}\n</style>\n","import { queryShareSpus } from '@/api/shareService'\nimport { FilterTypes } from '@/constant/classifySort'\nimport { ShareSpuType } from '@/constant/shareService'\nimport { CityType } from '@/types/city'\nimport { FilterDataType } from '@/types/classifySort'\nimport { PositionType } from '@/types/position'\nimport { computed, nextTick, reactive, Ref, ref } from 'vue'\n\n/* 孕产模块分享赚商品列表 */\nexport const useShareSpus = (\n  position: Ref<PositionType | null>,\n  cityInfo: Ref<CityType>,\n  classifySort: Ref<any>,\n  allRecommendSpus: Ref<ShareSpuType[]>\n) => {\n  const spuList = reactive({\n    list: <ShareSpuType[]>[],\n    loading: false,\n    error: false,\n    finished: false,\n    start: 0,\n    load: async () => {\n      let longLatitude = undefined\n      if (position.value) {\n        longLatitude = `${position.value.lat},${position.value.lng}`\n      }\n      const openOption = !filterIsClassify.value\n      try {\n        const data = await queryShareSpus({\n          ...filterData.value,\n          shareReq: 1,\n          isShowHideSpu: 1,\n          cityId: cityInfo.value.cityId,\n          start: spuList.start,\n          tabs: '3',\n          type: 3,\n          openOption,\n          longLatitude\n        })\n        if (openOption) {\n          categoryInfo.value = data.categoryInfo\n        }\n        if (data.cmmdtyInfo) {\n          const newSpus = data.cmmdtyInfo.list || []\n          spuList.list.push(...newSpus)\n          spuList.start += newSpus.length\n          if (spuList.list.length == data.cmmdtyInfo.total) {\n            spuList.finished = true\n          }\n        }\n        await nextTick()\n        spuList.loading = false\n      } catch (error) {\n        spuList.loading = false\n        spuList.error = true\n      }\n    },\n    itemInView: (isLast = false) => {}\n  })\n  const categoryInfo = ref([])\n  const filterOptions = computed(() => {\n    const options = [\n      FilterTypes.Category,\n      FilterTypes.District, //城区筛选\n      FilterTypes.Earn,\n      FilterTypes.Sale\n    ]\n    return options\n  })\n  const filterInitData: Ref<FilterDataType> = ref({\n    shareGoodsOnly: 1,\n    shareAmountSort: true\n  })\n  const filterData = ref(filterInitData.value)\n  const filterIsClassify = computed(() => {\n    if (\n      classifySort.value &&\n      (!classifySort.value.allCategoryInfos[0].list[0].selected ||\n        !classifySort.value.allDistricts[0].selected)\n    ) {\n      return true\n    }\n    return false\n  })\n  const recommendSpus = computed(() => {\n    return allRecommendSpus.value.filter(item => <number>item.maxSaleRate > 0)\n  })\n  const filterChange = (newFilterData: FilterDataType) => {\n    filterData.value = newFilterData\n    spuList.list = []\n    spuList.loading = true\n    spuList.error = false\n    spuList.finished = false\n    spuList.start = 0\n    spuList.load()\n  }\n  const filterReset = () => {\n    classifySort.value && classifySort.value.reset()\n  }\n\n  return {\n    spuList,\n    categoryInfo,\n    filterOptions,\n    filterInitData,\n    filterIsClassify,\n    recommendSpus,\n    filterChange,\n    filterReset\n  }\n}\n","import { rem2RealPx } from '@/utils'\nimport { computed } from 'vue'\n\nexport const useOffsetTop = () => {\n  const classifySortOffsetTop = computed(() => {\n    const tabHeight = rem2RealPx(84 / 75)\n    return tabHeight\n  })\n\n  const classifySortStickyDistance = computed(() => {\n    const taskDom = document.querySelector('.share-service-task-comp')\n    const bannerDom = document.querySelector('.share-service-banner')\n    const titleBarDom = document.querySelector('.title-bar')\n    const taskHeight = taskDom ? taskDom.getBoundingClientRect().height : 0\n    const bannerHeight = bannerDom\n      ? bannerDom.getBoundingClientRect().height\n      : 0\n    const titleBarHeight = titleBarDom\n      ? titleBarDom.getBoundingClientRect().height\n      : 0\n    return taskHeight + bannerHeight + titleBarHeight\n  })\n  return { classifySortOffsetTop, classifySortStickyDistance }\n}\n","<template>\n  <VanTab\n    title=\"孕产\"\n    name=\"yunchan\"\n    :style=\"`min-height: calc(100vh - ${Number(classifySortOffsetTop) - 1}px)`\"\n  >\n    <ClassifySort\n      ref=\"classifySort\"\n      immediate\n      :options=\"filterOptions\"\n      :initial-filter=\"filterInitData\"\n      :category-infos=\"categoryInfo\"\n      :districts=\"districts\"\n      :sticky-distance=\"classifySortStickyDistance\"\n      :offset-top=\"classifySortOffsetTop\"\n      @filter-change=\"filterChange\"\n    ></ClassifySort>\n    <EmptyError\n      v-if=\"!spuList.loading && [...recommendSpus, ...spuList.list].length == 0\"\n      :type=\"spuList.error ? 'error' : 'empty'\"\n      :text=\"\n        spuList.error\n          ? '加载出错，请稍后再试'\n          : filterIsClassify\n          ? '没有找到筛选内容呢～'\n          : '没有找到内容呢～'\n      \"\n    >\n      <div\n        v-if=\"!spuList.error && filterIsClassify\"\n        class=\"reset-classify\"\n        @click=\"filterReset\"\n      >\n        重置筛选项\n      </div>\n    </EmptyError>\n    <div class=\"spu-list\">\n      <ShareServiceEarnSpu\n        v-for=\"(item, index) in recommendSpus\"\n        :key=\"index\"\n        class=\"spu-item\"\n        :spu=\"item\"\n        :real-spu-id=\"item.spuId\"\n        :min-share-amount=\"item.minSaleRate\"\n        :max-share-amount=\"item.maxSaleRate\"\n        recommended\n      ></ShareServiceEarnSpu>\n    </div>\n    <VanList\n      v-model:loading=\"spuList.loading\"\n      v-model:error=\"spuList.error\"\n      class=\"spu-list\"\n      :finished=\"spuList.finished\"\n      :finished-text=\"\n        [...recommendSpus, ...spuList.list].length > 0 ? '没有更多了' : ''\n      \"\n      :immediate-check=\"false\"\n      @load=\"spuList.load\"\n    >\n      <ShareServiceEarnSpu\n        v-for=\"(item, index) in spuList.list\"\n        :key=\"index\"\n        class=\"spu-item\"\n        :spu=\"item\"\n        :real-spu-id=\"\n          item.templateType2Id == 601 ? item.businessId : item.spuId\n        \"\n        :min-share-amount=\"getShareAmount(item).minAmount\"\n        :max-share-amount=\"getShareAmount(item).maxAmount\"\n        :share-city-code=\"\n          item.templateType2Id == 601 ? cityInfo.cityId.toString() : ''\n        \"\n        @in-view=\"spuList.itemInView(index == spuList.list.length - 1)\"\n      ></ShareServiceEarnSpu>\n    </VanList>\n  </VanTab>\n</template>\n<script lang=\"ts\" setup>\nimport { Tab as VanTab, List as VanList } from 'vant'\nimport { getShareAmount } from '@/utils'\nimport { PropType, ref, toRefs } from 'vue'\nimport ShareServiceEarnSpu from './ShareServiceEarnSpu.vue'\nimport { useShareSpus } from '@/composables/share-service/shareServiceEarnTabYC'\nimport { ShareSpuType } from '@/constant/shareService'\nimport { useOffsetTop } from '@/composables/share-service/common'\nimport { PositionType } from '@/types/position'\nimport { CityType } from '@/types/city'\nimport { DistrictType } from '@/types/classifySort'\nimport { DefaultCity } from '@/constant/city'\n\nconst props = defineProps({\n  position: {\n    type: Object as PropType<PositionType | null>,\n    default() {\n      return null\n    }\n  },\n  cityInfo: {\n    type: Object as PropType<CityType>,\n    default() {\n      return DefaultCity\n    }\n  },\n  districts: {\n    type: Array as PropType<DistrictType[]>,\n    default() {\n      return []\n    }\n  },\n  allRecommendSpus: {\n    type: Array as PropType<ShareSpuType[]>,\n    default() {\n      return []\n    }\n  }\n})\n\nconst { position, cityInfo, allRecommendSpus } = toRefs(props)\n\nconst { classifySortOffsetTop, classifySortStickyDistance } = useOffsetTop()\n\nconst classifySort = ref()\nconst {\n  spuList,\n  categoryInfo,\n  filterOptions,\n  filterInitData,\n  filterIsClassify,\n  recommendSpus,\n  filterChange,\n  filterReset\n} = useShareSpus(position, cityInfo, classifySort, allRecommendSpus)\n</script>\n<style lang=\"scss\" scoped>\n.spu-list {\n  padding: 0 32px;\n  .spu-item {\n    margin-bottom: 24px;\n  }\n}\n.reset-classify {\n  padding: 0 44px;\n  line-height: 60px;\n  font-size: 28px;\n  color: #121212;\n  border: 2px solid #979797;\n  border-radius: 60px;\n}\n</style>\n","import { queryShareSpus } from '@/api/shareService'\nimport { FilterTypes } from '@/constant/classifySort'\nimport { ShareSpuType } from '@/constant/shareService'\nimport { CityType } from '@/types/city'\nimport { FilterDataType } from '@/types/classifySort'\nimport { PositionType } from '@/types/position'\nimport { computed, nextTick, reactive, Ref, ref } from 'vue'\n\n/* 成长加模块分享赚商品列表 */\nexport const useShareSpus = (\n  position: Ref<PositionType | null>,\n  cityInfo: Ref<CityType>,\n  classifySort: Ref<any>,\n  allRecommendSpus: Ref<ShareSpuType[]>\n) => {\n  const spuList = reactive({\n    list: <ShareSpuType[]>[],\n    loading: false,\n    error: false,\n    finished: false,\n    start: 0,\n    load: async () => {\n      let longLatitude = undefined\n      if (position.value) {\n        longLatitude = `${position.value.lat},${position.value.lng}`\n      }\n      const openOption = !filterIsClassify.value\n      try {\n        const data = await queryShareSpus({\n          ...filterData.value,\n          shareReq: 1,\n          isShowHideSpu: 1,\n          cityId: cityInfo.value.cityId,\n          start: spuList.start,\n          tabs: '3',\n          type: 3,\n          openOption,\n          longLatitude\n        })\n        if (openOption) {\n          categoryInfo.value = data.categoryInfo\n        }\n        if (data.cmmdtyInfo) {\n          const newSpus = data.cmmdtyInfo.list || []\n          spuList.list.push(...newSpus)\n          spuList.start += newSpus.length\n          if (spuList.list.length == data.cmmdtyInfo.total) {\n            spuList.finished = true\n          }\n        }\n        await nextTick()\n        spuList.loading = false\n      } catch (error) {\n        spuList.loading = false\n        spuList.error = true\n      }\n    },\n    itemInView: (isLast = false) => {}\n  })\n  const categoryInfo = ref([])\n  const filterOptions = computed(() => {\n    const options = [\n      FilterTypes.Category,\n      FilterTypes.District,\n      FilterTypes.Earn,\n      FilterTypes.Sale\n    ]\n    return options\n  })\n  const filterInitData: Ref<FilterDataType> = ref({\n    shareGoodsOnly: 1,\n    shareAmountSort: true\n  })\n  const filterData = ref(filterInitData.value)\n  const filterIsClassify = computed(() => {\n    if (\n      classifySort.value &&\n      (!classifySort.value.allCategoryInfos[0].list[0].selected ||\n        !classifySort.value.allDistricts[0].selected)\n    ) {\n      return true\n    }\n    return false\n  })\n  const recommendSpus = computed(() => {\n    return allRecommendSpus.value\n  })\n  const filterChange = (newFilterData: FilterDataType) => {\n    filterData.value = newFilterData\n    spuList.list = []\n    spuList.loading = true\n    spuList.error = false\n    spuList.finished = false\n    spuList.start = 0\n    spuList.load()\n  }\n  const filterReset = () => {\n    classifySort.value && classifySort.value.reset()\n  }\n\n  return {\n    spuList,\n    categoryInfo,\n    filterOptions,\n    filterInitData,\n    filterIsClassify,\n    recommendSpus,\n    filterChange,\n    filterReset\n  }\n}\n","<template>\n  <VanTab\n    title=\"成长加\"\n    name=\"chengzhangjia\"\n    :style=\"`min-height: calc(100vh - ${Number(classifySortOffsetTop) - 1}px)`\"\n  >\n    <ClassifySort\n      ref=\"classifySort\"\n      immediate\n      :options=\"filterOptions\"\n      :initial-filter=\"filterInitData\"\n      :category-infos=\"categoryInfo\"\n      :districts=\"districts\"\n      :sticky-distance=\"classifySortStickyDistance\"\n      :offset-top=\"classifySortOffsetTop\"\n      @filter-change=\"filterChange\"\n    ></ClassifySort>\n    <EmptyError\n      v-if=\"!spuList.loading && [...recommendSpus, ...spuList.list].length == 0\"\n      :type=\"spuList.error ? 'error' : 'empty'\"\n      :text=\"\n        spuList.error\n          ? '加载出错，请稍后再试'\n          : filterIsClassify\n          ? '没有找到筛选内容呢～'\n          : '没有找到内容呢～'\n      \"\n    >\n      <div\n        v-if=\"!spuList.error && filterIsClassify\"\n        class=\"reset-classify\"\n        @click=\"filterReset\"\n      >\n        重置筛选项\n      </div>\n    </EmptyError>\n    <div class=\"spu-list\">\n      <ShareServiceEarnSpu\n        v-for=\"(item, index) in recommendSpus\"\n        :key=\"index\"\n        class=\"spu-item\"\n        :spu=\"item\"\n        :real-spu-id=\"item.spuId\"\n        :min-share-amount=\"item.minSaleRate\"\n        :max-share-amount=\"item.maxSaleRate\"\n        recommended\n      ></ShareServiceEarnSpu>\n    </div>\n    <VanList\n      v-model:loading=\"spuList.loading\"\n      v-model:error=\"spuList.error\"\n      class=\"spu-list\"\n      :finished=\"spuList.finished\"\n      :finished-text=\"\n        [...recommendSpus, ...spuList.list].length > 0 ? '没有更多了' : ''\n      \"\n      :immediate-check=\"false\"\n      @load=\"spuList.load\"\n    >\n      <ShareServiceEarnSpu\n        v-for=\"(item, index) in spuList.list\"\n        :key=\"index\"\n        class=\"spu-item\"\n        :spu=\"item\"\n        :real-spu-id=\"\n          item.templateType2Id == 601 ? item.businessId : item.spuId\n        \"\n        :min-share-amount=\"getShareAmount(item).minAmount\"\n        :max-share-amount=\"getShareAmount(item).maxAmount\"\n        :share-city-code=\"\n          item.templateType2Id == 601 ? cityInfo.cityId.toString() : ''\n        \"\n        @in-view=\"spuList.itemInView(index == spuList.list.length - 1)\"\n      ></ShareServiceEarnSpu>\n    </VanList>\n  </VanTab>\n</template>\n<script lang=\"ts\" setup>\nimport { Tab as VanTab, List as VanList } from 'vant'\nimport { getShareAmount } from '@/utils'\nimport { PropType, ref, toRefs } from 'vue'\n\nimport ShareServiceEarnSpu from './ShareServiceEarnSpu.vue'\nimport { useShareSpus } from '@/composables/share-service/shareServiceEarnTabCZJ'\nimport { ShareSpuType } from '@/constant/shareService'\nimport { useOffsetTop } from '@/composables/share-service/common'\nimport { PositionType } from '@/types/position'\nimport { CityType } from '@/types/city'\nimport { DistrictType } from '@/types/classifySort'\nimport { DefaultCity } from '@/constant/city'\n\nconst props = defineProps({\n  position: {\n    type: Object as PropType<PositionType | null>,\n    default() {\n      return null\n    }\n  },\n  cityInfo: {\n    type: Object as PropType<CityType>,\n    default() {\n      return DefaultCity\n    }\n  },\n  districts: {\n    type: Array as PropType<DistrictType[]>,\n    default() {\n      return []\n    }\n  },\n  allRecommendSpus: {\n    type: Array as PropType<ShareSpuType[]>,\n    default() {\n      return []\n    }\n  }\n})\n\nconst { position, cityInfo, allRecommendSpus } = toRefs(props)\n\nconst { classifySortOffsetTop, classifySortStickyDistance } = useOffsetTop()\n\nconst classifySort = ref()\nconst {\n  spuList,\n  categoryInfo,\n  filterOptions,\n  filterInitData,\n  filterIsClassify,\n  recommendSpus,\n  filterChange,\n  filterReset\n} = useShareSpus(position, cityInfo, classifySort, allRecommendSpus)\n</script>\n<style lang=\"scss\" scoped>\n.spu-list {\n  padding: 0 32px;\n  .spu-item {\n    margin-bottom: 24px;\n  }\n}\n.reset-classify {\n  padding: 0 44px;\n  line-height: 60px;\n  font-size: 28px;\n  color: #121212;\n  border: 2px solid #979797;\n  border-radius: 60px;\n}\n</style>\n","import { queryShareSpus } from '@/api/shareService'\nimport { FilterTypes } from '@/constant/classifySort'\nimport { ShareSpuType } from '@/constant/shareService'\nimport { CityType } from '@/types/city'\nimport { FilterDataType } from '@/types/classifySort'\nimport { PositionType } from '@/types/position'\nimport { computed, nextTick, reactive, Ref, ref } from 'vue'\n\n/* 自营服务模块分享赚商品列表 */\nexport const useShareSpus = (\n  position: Ref<PositionType | null>,\n  cityInfo: Ref<CityType>,\n  classifySort: Ref<any>,\n  allRecommendSpus: Ref<ShareSpuType[]>\n) => {\n  const spuList = reactive({\n    list: <ShareSpuType[]>[],\n    loading: false,\n    error: false,\n    finished: false,\n    start: 0,\n    load: async () => {\n      let longLatitude = undefined\n      if (position.value) {\n        longLatitude = `${position.value.lat},${position.value.lng}`\n      }\n      const openOption = !filterIsClassify.value\n      try {\n        const data = await queryShareSpus({\n          ...filterData.value,\n          shareReq: 1,\n          isShowHideSpu: 1,\n          cityId: cityInfo.value.cityId,\n          start: spuList.start,\n          tabs: '3',\n          type: 3,\n          openOption,\n          longLatitude\n        })\n        if (openOption) {\n          categoryInfo.value = data.categoryInfo\n        }\n        if (data.cmmdtyInfo) {\n          const newSpus = data.cmmdtyInfo.list || []\n          spuList.list.push(...newSpus)\n          spuList.start += newSpus.length\n          if (spuList.list.length == data.cmmdtyInfo.total) {\n            spuList.finished = true\n          }\n        }\n        await nextTick()\n        spuList.loading = false\n      } catch (error) {\n        spuList.loading = false\n        spuList.error = true\n      }\n    },\n    itemInView: (isLast = false) => {}\n  })\n  const categoryInfo = ref([])\n  const filterOptions = computed(() => {\n    const options = [FilterTypes.Category]\n    return options\n  })\n  const filterInitData: Ref<FilterDataType> = ref({\n    shareGoodsOnly: 1,\n    shareAmountSort: true\n  })\n  const filterData = ref(filterInitData.value)\n  const filterIsClassify = computed(() => {\n    if (\n      classifySort.value &&\n      !classifySort.value.allCategoryInfos[0].list[0].selected\n    ) {\n      return true\n    }\n    return false\n  })\n  const recommendSpus = computed(() => {\n    return allRecommendSpus.value.filter(item => <number>item.maxSaleRate > 0)\n  })\n  const filterChange = (newFilterData: FilterDataType) => {\n    filterData.value = newFilterData\n    spuList.list = []\n    spuList.loading = true\n    spuList.error = false\n    spuList.finished = false\n    spuList.start = 0\n    spuList.load()\n  }\n  const filterReset = () => {\n    classifySort.value && classifySort.value.reset()\n  }\n\n  return {\n    spuList,\n    categoryInfo,\n    filterOptions,\n    filterInitData,\n    filterIsClassify,\n    recommendSpus,\n    filterChange,\n    filterReset\n  }\n}\n","<template>\n  <VanTab\n    title=\"自营服务\"\n    name=\"ziyingfuwu\"\n    :style=\"`min-height: calc(100vh - ${Number(classifySortOffsetTop) - 1}px)`\"\n  >\n    <ClassifySort\n      ref=\"classifySort\"\n      immediate\n      :options=\"filterOptions\"\n      :initial-filter=\"filterInitData\"\n      :category-infos=\"categoryInfo\"\n      :sticky-distance=\"classifySortStickyDistance\"\n      :offset-top=\"classifySortOffsetTop\"\n      @filter-change=\"filterChange\"\n    ></ClassifySort>\n    <EmptyError\n      v-if=\"!spuList.loading && [...recommendSpus, ...spuList.list].length == 0\"\n      :type=\"spuList.error ? 'error' : 'empty'\"\n      :text=\"\n        spuList.error\n          ? '加载出错，请稍后再试'\n          : filterIsClassify\n          ? '没有找到筛选内容呢～'\n          : '没有找到内容呢～'\n      \"\n    >\n      <div\n        v-if=\"!spuList.error && filterIsClassify\"\n        class=\"reset-classify\"\n        @click=\"filterReset\"\n      >\n        重置筛选项\n      </div>\n    </EmptyError>\n    <div class=\"spu-list\">\n      <ShareServiceEarnSpu\n        v-for=\"(item, index) in recommendSpus\"\n        :key=\"index\"\n        class=\"spu-item\"\n        :spu=\"item\"\n        :real-spu-id=\"item.spuId\"\n        :min-share-amount=\"item.minSaleRate\"\n        :max-share-amount=\"item.maxSaleRate\"\n        recommended\n      ></ShareServiceEarnSpu>\n    </div>\n    <VanList\n      v-model:loading=\"spuList.loading\"\n      v-model:error=\"spuList.error\"\n      class=\"spu-list\"\n      :finished=\"spuList.finished\"\n      :finished-text=\"\n        [...recommendSpus, ...spuList.list].length > 0 ? '没有更多了' : ''\n      \"\n      :immediate-check=\"false\"\n      @load=\"spuList.load\"\n    >\n      <ShareServiceEarnSpu\n        v-for=\"(item, index) in spuList.list\"\n        :key=\"index\"\n        class=\"spu-item\"\n        :spu=\"item\"\n        :real-spu-id=\"\n          item.templateType2Id == 601 ? item.businessId : item.spuId\n        \"\n        :min-share-amount=\"getShareAmount(item).minAmount\"\n        :max-share-amount=\"getShareAmount(item).maxAmount\"\n        @in-view=\"spuList.itemInView(index == spuList.list.length - 1)\"\n      ></ShareServiceEarnSpu>\n    </VanList>\n  </VanTab>\n</template>\n<script lang=\"ts\" setup>\nimport { Tab as VanTab, List as VanList } from 'vant'\nimport { getShareAmount } from '@/utils'\nimport { PropType, ref, toRefs } from 'vue'\nimport { useShareSpus } from '@/composables/share-service/shareServiceEarnTabZYFW'\nimport ShareServiceEarnSpu from './ShareServiceEarnSpu.vue'\nimport { ShareSpuType } from '@/constant/shareService'\nimport { useOffsetTop } from '@/composables/share-service/common'\nimport { PositionType } from '@/types/position'\nimport { CityType } from '@/types/city'\nimport { DefaultCity } from '@/constant/city'\n\nconst props = defineProps({\n  position: {\n    type: Object as PropType<PositionType | null>,\n    default() {\n      return null\n    }\n  },\n  cityInfo: {\n    type: Object as PropType<CityType>,\n    default() {\n      return DefaultCity\n    }\n  },\n  allRecommendSpus: {\n    type: Array as PropType<ShareSpuType[]>,\n    default() {\n      return []\n    }\n  }\n})\n\nconst { position, cityInfo, allRecommendSpus } = toRefs(props)\n\nconst { classifySortOffsetTop, classifySortStickyDistance } = useOffsetTop()\n\nconst classifySort = ref()\n\nconst {\n  spuList,\n  categoryInfo,\n  filterOptions,\n  filterInitData,\n  filterIsClassify,\n  recommendSpus,\n  filterChange,\n  filterReset\n} = useShareSpus(position, cityInfo, classifySort, allRecommendSpus)\n</script>\n<style lang=\"scss\" scoped>\n.spu-list {\n  padding: 0 32px;\n  .spu-item {\n    margin-bottom: 24px;\n  }\n}\n.reset-classify {\n  padding: 0 44px;\n  line-height: 60px;\n  font-size: 28px;\n  color: #121212;\n  border: 2px solid #979797;\n  border-radius: 60px;\n}\n</style>\n","import { queryShareKey } from '@/api/common'\nimport { queryAllActivities, queryShareActivities } from '@/api/shareService'\nimport { FilterTypes } from '@/constant/classifySort'\nimport {\n  ShareActivityType,\n  ShareKeyLinkTypeRKHY,\n  ShareKeyLinkTypeWorkChat,\n  ShareKeyTokenWorkChat,\n  ShareKeyToolType,\n  TrackTerm\n} from '@/constant/shareService'\nimport { CityType } from '@/types/city'\nimport { FilterDataType, StoreType } from '@/types/classifySort'\nimport { PositionType } from '@/types/position'\nimport { getMinicardUrl, replaceUrlKey, sleep } from '@/utils'\nimport { ImagePreview, Toast } from 'vant'\nimport { computed, reactive, Ref, ref } from 'vue'\n\n/* 活动模块列表 */\nexport const useShareActivities = (\n  position: Ref<PositionType | null>,\n  cityInfo: Ref<CityType>\n) => {\n  const activityList = reactive({\n    list: <ShareActivityType[][]>[],\n    loading: false,\n    error: false,\n    finished: false,\n    load: async () => {\n      try {\n        const data = await queryShareActivities({\n          ...filterData.value,\n          cityCode: cityInfo.value.cityId,\n          lat: position.value?.lat,\n          lng: position.value?.lng\n        })\n        activityList.loading = false\n        activityList.list.push(...data)\n        activityList.finished = true\n        if (stores.value.length == 0) {\n          stores.value = data.map((item: ShareActivityType[]) => ({\n            name: item[0].storeName,\n            code: item[0].storeCode,\n            selected: false\n          }))\n        }\n      } catch (error) {\n        activityList.loading = false\n        activityList.error = true\n      }\n    }\n  })\n  const stores: Ref<StoreType[]> = ref([])\n  const filterOptions = computed(() => {\n    const options = [FilterTypes.Store]\n    if (position.value) {\n      options.push(FilterTypes.Distance)\n    }\n    return options\n  })\n  const filterInitData: Ref<FilterDataType> = ref({\n    distanceSort: true\n  })\n  const filterData = ref(filterInitData.value)\n  const filterChange = (newFilterData: FilterDataType) => {\n    filterData.value = newFilterData\n    activityList.list = []\n    activityList.loading = true\n    activityList.error = false\n    activityList.finished = false\n    activityList.load()\n    activityMoreClicked.value = {}\n  }\n  const activityMoreClicked: Ref<{ [key: string]: boolean }> = ref({})\n  const activityMoreClick = async (activities: ShareActivityType[]) => {\n    const storeCode = activities[0].storeCode\n    Toast.loading({\n      forbidClick: true,\n      duration: 0,\n      message: '加载中...'\n    })\n    const allActivities = await queryAllActivities({ storeCode })\n    Toast.clear()\n    const moreActivities = allActivities.filter((item: ShareActivityType) => {\n      return !activities.some(item2 => item2.activityId == item.activityId)\n    })\n    activities.push(...moreActivities)\n    activityMoreClicked.value[storeCode] = true\n  }\n  return {\n    activityList,\n    stores,\n    filterOptions,\n    filterInitData,\n    filterChange,\n    activityMoreClicked,\n    activityMoreClick\n  }\n}\n\nexport const useActivityInfo = (cityInfo: Ref<CityType>) => {\n  const activityLink = (activity: ShareActivityType) => {\n    return `xbuy-event/1`\n  }\n  const storeLink = (store: { storeCode: string; storeName: string }) => {\n    return `xbuy-event/1`\n  }\n  const activityClick = async (activity: ShareActivityType) => {\n    location.href = activityLink(activity)\n  }\n  const storeClick = async (store: {\n    storeCode: string\n    storeName: string\n  }) => {\n    location.href = storeLink(store)\n  }\n\n  return {\n    activityLink,\n    storeLink,\n    storeClick,\n    activityClick\n  }\n}\n\nexport const useActivityShare = (cityInfo: Ref<CityType>) => {\n  const activityShare = async (e: Event, activity: ShareActivityType) => {\n    e.stopPropagation()\n    Toast.loading({\n      forbidClick: true,\n      duration: 0,\n      message: '加载中...'\n    })\n    const shareMinicard =\n      (await getMinicardUrl(\n        activity.coverPhotoUrl,\n        Number(activity.activitySkuPrice)\n      )) || activity.coverPhotoUrl\n    Toast('模拟拉起原生分享面板成功')\n    await sleep(1500)\n    ImagePreview([shareMinicard])\n  }\n  return {\n    activityShare\n  }\n}\n","<template>\n  <VanTab\n    title=\"互动活动\"\n    name=\"huodong\"\n    :style=\"`min-height: calc(100vh - ${Number(classifySortOffsetTop) - 1}px)`\"\n  >\n    <ClassifySort2\n      ref=\"classifySort\"\n      immediate\n      :options=\"filterOptions\"\n      :initial-filter=\"filterInitData\"\n      :stores=\"stores\"\n      :sticky-distance=\"classifySortStickyDistance\"\n      :offset-top=\"classifySortOffsetTop\"\n      @filter-change=\"filterChange\"\n    ></ClassifySort2>\n    <EmptyError\n      v-if=\"!activityList.loading && activityList.list.length == 0\"\n      :type=\"activityList.error ? 'error' : 'empty'\"\n      :text=\"activityList.error ? '加载出错，请稍后再试' : '没有找到内容呢～'\"\n    >\n    </EmptyError>\n    <VanList\n      v-model:loading=\"activityList.loading\"\n      v-model:error=\"activityList.error\"\n      class=\"activity-list\"\n      :finished=\"activityList.finished\"\n      :finished-text=\"activityList.list.length > 0 ? '没有更多了' : ''\"\n      :immediate-check=\"true\"\n      @load=\"activityList.load\"\n    >\n      <div\n        v-for=\"(item, index) in activityList.list\"\n        :key=\"index\"\n        class=\"store-item\"\n      >\n        <div\n          class=\"store-title\"\n          @click=\"\n            storeClick({\n              storeCode: item[0].storeCode,\n              storeName: item[0].storeName\n            })\n          \"\n        >\n          <BaseImg\n            class=\"store-head\"\n            :src=\"item[0].storePhotoUrl\"\n            width=\"52\"\n            height=\"52\"\n          />\n          <span class=\"pf-medium\">{{ item[0].storeName }}</span>\n        </div>\n        <div\n          v-for=\"(item2, index2) in item.slice(\n            0,\n            activityMoreClicked[item[0].storeCode] ? undefined : 2\n          )\"\n          :key=\"index2\"\n          class=\"activity-item\"\n          @click=\"activityClick(item2)\"\n        >\n          <BaseImg\n            class=\"activity-image\"\n            :src=\"item2.coverPhotoUrl\"\n            :width=\"186\"\n            :height=\"140\"\n          />\n          <div class=\"activity-detail\">\n            <div class=\"activity-name pf-medium\">\n              {{ item2.activeTheme }}\n            </div>\n            <div class=\"activity-time pf-medium\">\n              {{ item2.activityTimeStartFormat }}\n            </div>\n            <div class=\"activity-sign\">\n              <strong>{{ item2.signUpCount }}</strong\n              >人已报名（{{\n                item2.limitCount > 0 ? `限额${item2.limitCount}` : '名额不限'\n              }}）\n            </div>\n            <div class=\"activity-money\">\n              <div class=\"activity-price\">\n                <template v-if=\"Number(item2.activitySkuPrice) > 0\">\n                  <div class=\"yen\">&yen;</div>\n                  <span class=\"num pf-medium\">{{\n                    getYenPrice(item2.activitySkuPrice)\n                  }}</span>\n                </template>\n                <span v-else class=\"num pf-medium\">免费</span>\n              </div>\n              <div\n                class=\"activity-share-button\"\n                @click=\"e => activityShare(e, item2)\"\n              >\n                立即分享\n              </div>\n            </div>\n          </div>\n        </div>\n        <div\n          v-if=\"item.length > 2 && !activityMoreClicked[item[0].storeCode]\"\n          class=\"activity-more\"\n          @click=\"activityMoreClick(item)\"\n        >\n          查看更多<i></i>\n        </div>\n      </div>\n    </VanList>\n  </VanTab>\n</template>\n<script lang=\"ts\" setup>\nimport { Tab as VanTab, List as VanList } from 'vant'\nimport { getYenPrice } from '@/utils'\nimport { PropType, ref, toRefs } from 'vue'\nimport {\n  useActivityInfo,\n  useActivityShare,\n  useShareActivities\n} from '@/composables/share-service/shareServiceEarnTabHD'\nimport { useOffsetTop } from '@/composables/share-service/common'\nimport { PositionType } from '@/types/position'\nimport { CityType } from '@/types/city'\nimport { DefaultCity } from '@/constant/city'\n\nconst props = defineProps({\n  position: {\n    type: Object as PropType<PositionType | null>,\n    default() {\n      return null\n    }\n  },\n  cityInfo: {\n    type: Object as PropType<CityType>,\n    default() {\n      return DefaultCity\n    }\n  }\n})\n\nconst { position, cityInfo } = toRefs(props)\n\nconst { classifySortOffsetTop, classifySortStickyDistance } = useOffsetTop()\n\nconst classifySort = ref()\nconst {\n  activityList,\n  stores,\n  filterOptions,\n  filterInitData,\n  filterChange,\n  activityMoreClicked,\n  activityMoreClick\n} = useShareActivities(position, cityInfo)\n\nconst { storeClick, activityClick } = useActivityInfo(cityInfo)\nconst { activityShare } = useActivityShare(cityInfo)\n</script>\n<style lang=\"scss\" scoped>\n.activity-list {\n  padding: 0 32px;\n  .store-item {\n    border-radius: 16px;\n    margin-bottom: 24px;\n    background: #ffffff;\n    & > div:last-child {\n      border-bottom: none;\n    }\n    .store-title {\n      display: flex;\n      height: 96px;\n      padding: 0 24px;\n      align-items: center;\n      /* prettier-ignore */\n      border-bottom: 1Px solid #eeeeee;\n      .store-head {\n        flex: none;\n        border-radius: 4px;\n        overflow: hidden;\n        margin-right: 20px;\n      }\n      span {\n        flex: 1;\n        font-size: 28px;\n        color: #333333;\n        line-height: 40px;\n        @include ellipsis;\n      }\n    }\n\n    .activity-item {\n      display: flex;\n      padding: 24px 0;\n      margin: 0 24px;\n      /* prettier-ignore */\n      border-bottom: 1Px solid #eeeeee;\n      .activity-image {\n        flex: none;\n        border-radius: 8px;\n        overflow: hidden;\n        margin-right: 20px;\n      }\n\n      .activity-detail {\n        flex: 1;\n        overflow: hidden;\n        .activity-name {\n          font-size: 28px;\n          color: #333333;\n          line-height: 40px;\n          margin-bottom: 8px;\n          @include ellipsisN(2);\n        }\n        .activity-time {\n          font-size: 24px;\n          color: #666666;\n          line-height: 30px;\n          margin-bottom: 12px;\n        }\n\n        .activity-sign {\n          font-size: 24px;\n          color: #999999;\n          line-height: 30px;\n          margin-bottom: 16px;\n          strong {\n            color: #ff397e;\n          }\n        }\n        .activity-money {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          .activity-price {\n            display: flex;\n            align-items: baseline;\n            height: 44px;\n            .yen {\n              font-size: 24px;\n              color: #ff397e;\n            }\n            .num {\n              font-size: 36px;\n              color: #ff397e;\n            }\n          }\n          .activity-share-button {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: 160px;\n            height: 48px;\n            background: #ff397e;\n            border-radius: 32px;\n            font-size: 26px;\n            color: #ffffff;\n          }\n        }\n      }\n    }\n    .activity-more {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: 26px;\n      color: #666666;\n      line-height: 32px;\n      padding-bottom: 8px;\n      height: 88px;\n      box-sizing: border-box;\n      i {\n        display: inline-block;\n        width: 24px;\n        height: 24px;\n        background: url('@/assets/images/share-service/icon-arrow-down.png') 0 0/100%\n          100% no-repeat;\n        margin-left: 8px;\n      }\n    }\n  }\n}\n</style>\n","import { queryShareInsurances } from '@/api/shareService'\nimport {\n  InsuranceEarnDetailType,\n  ShareInsuranceType\n} from '@/constant/shareService'\nimport { Toast } from 'vant'\nimport { reactive, Ref, ref } from 'vue'\n\n/* 保险模块分享赚商品列表 */\nexport const useShareInsurances = () => {\n  const insuranceList = reactive({\n    list: <ShareInsuranceType[]>[],\n    loading: false,\n    error: false,\n    finished: false,\n    load: async () => {\n      try {\n        const data = (await queryShareInsurances()).ItemList || []\n        insuranceList.loading = false\n        insuranceList.list.push(...data)\n        insuranceList.finished = true\n      } catch (error) {\n        insuranceList.loading = false\n        insuranceList.error = true\n      }\n    }\n  })\n  return {\n    insuranceList\n  }\n}\n\nexport const useEarnDetail = () => {\n  const earnDetailShow = ref(false)\n  const earnDetailData: Ref<InsuranceEarnDetailType> = ref({})\n  const earnDetailClick = async (e: Event, insurance: ShareInsuranceType) => {\n    e.preventDefault()\n  }\n  return {\n    earnDetailData,\n    earnDetailShow,\n    earnDetailClick\n  }\n}\n\nexport const useInsuranceClick = () => {\n  const shareClick = (insurance: ShareInsuranceType) => {\n    Toast('模拟拉起原生分享面板成功')\n  }\n  const signClick = (insurance: ShareInsuranceType) => {\n    location.href = insurance.shareIntegrationUrl\n  }\n  return {\n    shareClick,\n    signClick\n  }\n}\n","<template>\n  <VanTab\n    title=\"保险\"\n    name=\"baoxian\"\n    :style=\"`min-height: calc(100vh - ${Number(classifySortOffsetTop) - 1}px)`\"\n  >\n    <EmptyError\n      v-if=\"!insuranceList.loading && insuranceList.list.length == 0\"\n      :type=\"insuranceList.error ? 'error' : 'empty'\"\n      :text=\"insuranceList.error ? '加载出错，请稍后再试' : '没有找到内容呢～'\"\n    >\n    </EmptyError>\n    <VanList\n      v-model:loading=\"insuranceList.loading\"\n      v-model:error=\"insuranceList.error\"\n      class=\"insurance-list\"\n      :finished=\"insuranceList.finished\"\n      :finished-text=\"insuranceList.list.length > 0 ? '没有更多了' : ''\"\n      :immediate-check=\"true\"\n      @load=\"insuranceList.load\"\n    >\n      <div\n        v-for=\"(item, index) in insuranceList.list\"\n        :key=\"index\"\n        class=\"insurance-item\"\n      >\n        <a class=\"insurance-info\" :href=\"item.redirectUrl\">\n          <BaseImg\n            class=\"insurance-image\"\n            :src=\"item.imageUrl\"\n            :width=\"190\"\n            :height=\"190\"\n          />\n          <div class=\"insurance-detail\">\n            <div class=\"insurance-name pf-medium\">\n              {{ item.name }}\n            </div>\n            <div class=\"insurance-desc pf-medium\">\n              {{ item.subTitle }}\n            </div>\n            <span class=\"insurance-tag\">{{ item.abbr }}</span>\n            <div class=\"insurance-money\">\n              <div class=\"insurance-price\">\n                <div class=\"yen pf-simbold\">&yen;</div>\n                <span class=\"num pf-simbold\">{{\n                  getYenPrice(item.salePriceMin)\n                }}</span>\n                <span v-if=\"item.salePriceMin < item.salePriceMax\" class=\"qi\"\n                  >起</span\n                >\n              </div>\n              <div\n                v-if=\"item.recomInfo\"\n                class=\"insurance-earn\"\n                @click=\"e => earnDetailClick(e, item)\"\n              >\n                <span>佣金 {{ item.recomInfo }}</span>\n                <i v-if=\"item.recomType == 2\"></i>\n              </div>\n            </div>\n          </div>\n        </a>\n        <div class=\"insurance-function\">\n          <div class=\"insurance-sign\" @click=\"signClick(item)\">签单必看</div>\n          <div class=\"insurance-share\" @click=\"shareClick(item)\">立即分享</div>\n        </div>\n      </div>\n    </VanList>\n\n    <VanOverlay class=\"earn-detail-overlay\" :show=\"earnDetailShow\">\n      <div class=\"earn-detail-wrap\">\n        <div class=\"earn-detail-content\">\n          <h1 class=\"earn-detail-header\">业绩明细</h1>\n          <div class=\"earn-detail-list\">\n            <div class=\"earn-detail-list-header pf-simbold\">\n              <em\n                v-for=\"(item, index) in earnDetailData.titleList\"\n                :key=\"index\"\n                >{{ item }}</em\n              >\n            </div>\n            <ul class=\"earn-detail-list-items\">\n              <li\n                v-for=\"(item, index) in earnDetailData.dataList\"\n                :key=\"index\"\n                class=\"earn-detail-list-item\"\n              >\n                <em v-for=\"(item2, index2) in item\" :key=\"index2\">{{\n                  item2\n                }}</em>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"earn-detail-close\" @click=\"earnDetailShow = false\">\n          我知道了\n        </div>\n      </div>\n    </VanOverlay>\n  </VanTab>\n</template>\n<script lang=\"ts\" setup>\nimport { Tab as VanTab, List as VanList, Overlay as VanOverlay } from 'vant'\nimport {\n  useEarnDetail,\n  useInsuranceClick,\n  useShareInsurances\n} from '@/composables/share-service/shareServiceEarnTabBX'\nimport { useOffsetTop } from '@/composables/share-service/common'\nimport { getYenPrice } from '@/utils'\n\nconst { insuranceList } = useShareInsurances()\n\nconst { classifySortOffsetTop } = useOffsetTop()\n\nconst { earnDetailData, earnDetailShow, earnDetailClick } = useEarnDetail()\nconst { shareClick, signClick } = useInsuranceClick()\n</script>\n<style lang=\"scss\" scoped>\n.insurance-list {\n  padding: 0 32px;\n  .insurance-item {\n    background: #ffffff;\n    border-radius: 16px;\n    padding: 24px 24px 0;\n    margin-bottom: 24px;\n    .insurance-info {\n      display: flex;\n      padding-bottom: 24px;\n      .insurance-image {\n        flex: none;\n        border-radius: 8px;\n        overflow: hidden;\n        margin-right: 20px;\n      }\n\n      .insurance-detail {\n        flex: 1;\n        overflow: hidden;\n        .insurance-name {\n          font-size: 28px;\n          color: #15161f;\n          line-height: 40px;\n          margin-bottom: 8px;\n          @include ellipsis;\n        }\n        .insurance-desc {\n          font-size: 24px;\n          color: #999999;\n          line-height: 30px;\n          margin-bottom: 12px;\n          @include ellipsisN(2);\n        }\n\n        .insurance-tag {\n          display: inline-block;\n          box-sizing: border-box;\n          padding: 0 10px;\n          height: 28px;\n          line-height: 24px;\n          border-radius: 14px;\n          border: 2px solid rgba(251, 160, 50, 1);\n          font-size: 20px;\n          color: #fba032;\n          margin-bottom: 16px;\n          @include ellipsis;\n        }\n        .insurance-money {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          .insurance-price {\n            display: flex;\n            align-items: baseline;\n            height: 44px;\n            .yen {\n              font-size: 32px;\n              color: #ff397e;\n            }\n            .num {\n              font-size: 42px;\n              color: #ff397e;\n              margin-right: 3px;\n            }\n            .qi {\n              font-size: 22px;\n              color: #999999;\n            }\n          }\n          .insurance-earn {\n            display: flex;\n            align-items: center;\n            span {\n              font-size: 26px;\n              color: #ff397e;\n              line-height: 36px;\n            }\n            i {\n              width: 24px;\n              height: 24px;\n              background: url(@/assets/images/share-service/icon-arrow-right.png)\n                0 0/100% 100% no-repeat;\n              margin-left: 4px;\n            }\n          }\n        }\n      }\n    }\n    .insurance-function {\n      box-sizing: border-box;\n      height: 104px;\n      padding-bottom: 12px;\n      display: flex;\n      align-items: center;\n      justify-content: flex-end;\n      border-top: 2px solid #f4f5fa;\n      .insurance-share {\n        width: 160px;\n        font-size: 26px;\n        color: #ffffff;\n        text-align: center;\n        height: 52px;\n        line-height: 52px;\n        background: #ff397e;\n        border-radius: 32px;\n      }\n      .insurance-sign {\n        box-sizing: border-box;\n        width: 160px;\n        font-size: 26px;\n        color: #15161f;\n        text-align: center;\n        height: 52px;\n        line-height: 48px;\n        border-radius: 32px;\n        /* prettier-ignore */\n        border: 1Px solid #999999;\n        margin-right: 17px;\n      }\n    }\n  }\n}\n\n.earn-detail-overlay {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  .earn-detail-wrap {\n    width: 560px;\n    background: #ffffff;\n    border-radius: 12px;\n    .earn-detail-content {\n      padding: 50px 40px 55px;\n      .earn-detail-header {\n        text-align: center;\n        font-size: 36px;\n        line-height: 40px;\n        color: rgba(0, 0, 0, 0.85);\n      }\n      .earn-detail-list {\n        margin: 30px 0 21px;\n        /* prettier-ignore */\n        border: 1Px solid #e7e7e7;\n        .earn-detail-list-header {\n          background: #f5f5f5;\n          display: flex;\n          em {\n            box-sizing: border-box;\n            flex: 1;\n            /* prettier-ignore */\n            border-right: 1Px solid #e7e7e7;\n            color: #333;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 60px;\n            font-size: 22px;\n            &:last-child {\n              border-right: none;\n            }\n          }\n        }\n        .earn-detail-list-items {\n          max-height: 305px;\n          overflow-y: auto;\n          .earn-detail-list-item {\n            /* prettier-ignore */\n            border-top: 1Px solid #e7e7e7;\n            display: flex;\n            &:first-child {\n              border-top: none;\n            }\n            em {\n              box-sizing: border-box;\n              flex: 1;\n              /* prettier-ignore */\n              border-right: 1Px solid #e7e7e7;\n              color: #666;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              height: 60px;\n              font-size: 22px;\n              &:last-child {\n                border-right: none;\n              }\n            }\n          }\n        }\n      }\n    }\n    .earn-detail-close {\n      /* prettier-ignore */\n      border-top: 1Px solid #e8e8e8;\n      height: 88px;\n      line-height: 88px;\n      text-align: center;\n      color: #ff397e;\n      font-size: 32px;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"share-service-earn\">\n    <VanTabs\n      v-model:active=\"selectedTab\"\n      class=\"tabs\"\n      style=\"--fix-bg: #ffffff\"\n      :ellipsis=\"false\"\n      sticky\n      shrink\n      :offset-top=\"tabOffsetTop\"\n      @click-tab=\"tabClick\"\n    >\n      <ShareServiceEarnTabYC\n        :position=\"position\"\n        :city-info=\"cityInfo\"\n        :districts=\"districts\"\n        :all-recommend-spus=\"recommendSpus\"\n      ></ShareServiceEarnTabYC>\n      <ShareServiceEarnTabCZJ\n        :position=\"position\"\n        :city-info=\"cityInfo\"\n        :districts=\"districts\"\n        :all-recommend-spus=\"recommendSpus\"\n      ></ShareServiceEarnTabCZJ>\n      <ShareServiceEarnTabZYFW\n        :position=\"position\"\n        :city-info=\"cityInfo\"\n        :all-recommend-spus=\"recommendSpus\"\n      ></ShareServiceEarnTabZYFW>\n      <ShareServiceEarnTabHD\n        :position=\"position\"\n        :city-info=\"cityInfo\"\n      ></ShareServiceEarnTabHD>\n      <ShareServiceEarnTabBX></ShareServiceEarnTabBX>\n    </VanTabs>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { Tabs as VanTabs } from 'vant'\nimport {} from '@/utils'\nimport { computed, PropType, ref, toRefs } from 'vue'\nimport ShareServiceEarnTabYC from './ShareServiceEarnTabYC.vue'\nimport ShareServiceEarnTabCZJ from './ShareServiceEarnTabCZJ.vue'\nimport ShareServiceEarnTabZYFW from './ShareServiceEarnTabZYFW.vue'\nimport ShareServiceEarnTabHD from './ShareServiceEarnTabHD.vue'\nimport ShareServiceEarnTabBX from './ShareServiceEarnTabBX.vue'\nimport { ShareSpuType, TrackTerm } from '@/constant/shareService'\nimport { PositionType } from '@/types/position'\nimport { CityType } from '@/types/city'\nimport { DistrictType } from '@/types/classifySort'\nimport { DefaultCity } from '@/constant/city'\n\nconst props = defineProps({\n  position: {\n    type: Object as PropType<PositionType | null>,\n    default() {\n      return null\n    }\n  },\n  cityInfo: {\n    type: Object as PropType<CityType>,\n    default() {\n      return DefaultCity\n    }\n  },\n  districts: {\n    type: Array as PropType<DistrictType[]>,\n    default() {\n      return []\n    }\n  },\n  recommendSpus: {\n    type: Array as PropType<ShareSpuType[]>,\n    default() {\n      return []\n    }\n  }\n})\n\nconst { recommendSpus } = toRefs(props)\n\nconst selectedTab = ref('')\n\nconst tabOffsetTop = computed(() => {\n  return 0\n})\n\nconst tabClick = ({ title = '' }) => {}\n</script>\n<style lang=\"scss\" scoped>\n.share-service-earn {\n  .title {\n    box-sizing: border-box;\n    height: 80px;\n    display: flex;\n    padding: 40px 32px 0;\n    align-items: center;\n    i {\n      width: 8px;\n      height: 28px;\n      background: #ff397e;\n      border-radius: 4px;\n      margin-right: 16px;\n      flex: none;\n    }\n    .title-text {\n      font-size: 32px;\n      color: #15161f;\n      flex: 1;\n    }\n  }\n  .tabs {\n    @include vanTab(\n      $height: 84px,\n      $padding: 0 32px,\n      $background: transparent,\n      $activeColor: #ff397e,\n      $activeSize: 30px,\n      $inactiveColor: #15161f,\n      $inactiveSize: 30px,\n      $tabMargin: 0 40px 0 0\n    );\n    :deep(.van-tabs__line) {\n      display: none;\n    }\n    :deep(.van-tab__text) {\n      font-weight: 500 !important;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"share-service\">\n    <TitleBar\n      :city-name=\"cityInfo.cityName\"\n      placeholder=\"请输入想要分享的商品\"\n      class=\"title-bar-comp\"\n    >\n    </TitleBar>\n    <VanSwipe\n      v-if=\"banners.length > 0\"\n      class=\"share-service-banner\"\n      :show-indicators=\"banners.length > 0\"\n      :autoplay=\"6000\"\n      :loop=\"true\"\n    >\n      <VanSwipeItem\n        v-for=\"(item, index) in banners\"\n        :key=\"index\"\n        @click=\"bannerClick(item)\"\n      >\n        <BaseImg :src=\"item.rotationPic\" width=\"686\" height=\"240\" />\n      </VanSwipeItem>\n    </VanSwipe>\n    <ShareServiceTask\n      class=\"share-service-task-comp\"\n      :city-info=\"cityInfo\"\n      :tasks=\"shareTasks\"\n    ></ShareServiceTask>\n    <ShareServiceEarn\n      v-if=\"shareTasksLoaded && locationLoaded\"\n      class=\"share-service-earn-comp\"\n      :position=\"position\"\n      :city-info=\"cityInfo\"\n      :districts=\"districts\"\n    ></ShareServiceEarn>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { Swipe as VanSwipe, SwipeItem as VanSwipeItem } from 'vant'\nimport { setLoading } from '@/utils'\nimport { useLocation } from '@/composables/common'\nimport ShareServiceTask from './ShareServiceTask.vue'\nimport ShareServiceEarn from './ShareServiceEarn.vue'\nimport { nextTick, onMounted, Ref, ref } from 'vue'\nimport { ShareTaskType } from '@/constant/shareService'\nimport { queryShareTask } from '@/api/shareService'\n\nsetLoading(true)\n\nconst { position, cityInfo, districts, locationLoaded } = useLocation({\n  districts: true,\n  position: false\n})\nconst banners: Ref<{ rotationPic: string; jumpUrl: string }[]> = ref([])\nconst shareTasks: Ref<ShareTaskType[]> = ref([])\nconst shareTasksLoaded = ref(false)\n\nonMounted(async () => {\n  const { rotationPicList, shareTaskList } = await queryShareTask(\n    cityInfo.value.cityId\n  )\n  banners.value = rotationPicList || []\n  shareTasks.value = shareTaskList || []\n  nextTick(() => {\n    shareTasksLoaded.value = true\n  })\n  setLoading(false)\n})\n\nconst bannerClick = (banner: any) => {\n  if (banner.jumpUrl) {\n    location.href = banner.jumpUrl\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.share-service {\n  background-image: linear-gradient(180deg, #ffffff 0, #f4f5fa 446px);\n  .title-bar-comp .my-earn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0 16px;\n    height: 54px;\n    margin-left: 22px;\n    background-image: linear-gradient(0deg, #ff7d46, #ff4b4b);\n    border-radius: 27px;\n    i {\n      width: 40px;\n      height: 40px;\n      background: url(@/assets/images/share-service/icon-coin.png) 0 0/100% 100%\n        no-repeat;\n    }\n    span {\n      color: #ffffff;\n      font-size: 26px;\n    }\n  }\n  .share-service-banner {\n    width: 686px;\n    height: 240px;\n    margin: 0 auto 16px;\n    border-radius: 16px;\n    overflow: hidden;\n    :deep(.van-swipe__indicators) {\n      bottom: 16px;\n      .van-swipe__indicator {\n        width: 8px;\n        height: 8px;\n        background: rgba(0, 0, 0, 0.16);\n        margin-right: 12px;\n        opacity: 1;\n        &.van-swipe__indicator--active {\n          background: #ff397e;\n        }\n      }\n    }\n  }\n}\n</style>\n<style lang=\"scss\">\nhtml,\nbody {\n  background: #f4f5fa;\n}\n</style>\n"],"names":["_createVNode","_List","isNumber","useShareSpus"],"mappings":"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"}