var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,i=(e,t,n)=>new Promise(((o,r)=>{var a=e=>{try{i(n.next(e))}catch(t){r(t)}},l=e=>{try{i(n.throw(e))}catch(t){r(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,l);i((n=n.apply(e,t)).next())}));import{G as c}from"./vendor.7e024a7d.js";var u={to:[String,Object],url:String,replace:Boolean};function s(e){var{to:t,url:n,replace:o,$router:r}=e;t&&r?r[o?"replace":"push"](t):n&&(o?location.replace(n):location.href=n)}function d(){var e=c().proxy;return()=>s(e)}var p=0;function m(){var e=c(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return t+"-"+ ++p}function y(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function f(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}const v=function(e){let t={};function n(){try{const t="__some_random_key_you_are_not_going_to_use__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return!1}}return{getItem:function(o){return n()?JSON.parse(e.getItem(o)):t.hasOwnProperty(o)?t[o]:null},setItem:function(o,r){n()?e.setItem(o,JSON.stringify(r)):t[o]=String(r)},removeItem:function(o){n()?e.removeItem(o):delete t[o]},clear:function(){n()?e.clear():t={}},key:function(o){return n()?e.key(o):Object.keys(t)[o]||null}}}(localStorage);function h(){return i(this,null,(function*(){const e=yield new Promise(((e,t)=>{var n,o,r,a,l;window.AMap&&window.AMap.Map?e(window.AMap):(n="//webapi.amap.com/maps?v=1.4.15&key=c740e64858e21be917b7a68d264f60bd&callback=onAMapLoaded",o=n=>{n?t(null):window.onAMapLoaded=()=>{e(window.AMap)}},a=document.head||document.getElementsByTagName("head")[0],l=document.createElement("script"),"function"==typeof o&&(r=o,o={}),o=o||{},r=r||function(){},l.type=o.type||"text/javascript",l.charset=o.charset||"utf8",l.async=!("async"in o)||!!o.async,l.src=n,o.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(l,o.attrs),o.text&&(l.text=""+o.text),("onload"in l?y:f)(l,r),l.onload||y(l,r),a.appendChild(l))}));return new Promise(((t,n)=>{try{if(e){new e.Map("iCenter").plugin("AMap.Geolocation",(()=>{const o=new e.Geolocation({enableHighAccuracy:!0,timeout:5e3,buttonOffset:new e.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"});o.getCurrentPosition(),e.event.addListener(o,"complete",(e=>{var n,o,r,a;console.log(e);const l=null==(n=null==e?void 0:e.addressComponent)?void 0:n.adcode,i=l?`${l.slice(0,4)}00`:"",c=null==(o=null==e?void 0:e.addressComponent)?void 0:o.city,u=c?c.replace("å¸‚",""):"",s=null==(r=null==e?void 0:e.position)?void 0:r.lat,d=null==(a=null==e?void 0:e.position)?void 0:a.lng;t(i?{cityId:i,cityName:u,lat:s,lng:d}:null)})),e.event.addListener(o,"error",(e=>{console.log(e),n(null)}))}))}else t(null)}catch(o){console.log(o),n(null)}}))}))}function w(e=30){return i(this,null,(function*(){try{const u=v.getItem("location"),s=Date.now();let d;return d=u&&s-u.time<60*e*1e3?u:yield h(),d&&v.setItem("location",(i=((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))a.call(t,n)&&l(e,n,t[n]);return e})({},d),c={time:Date.now()},t(i,n(c)))),d}catch(u){return null}var i,c}))}export{m as a,s as b,w as g,u as r,d as u};
//# sourceMappingURL=location.4456e9f0.js.map
