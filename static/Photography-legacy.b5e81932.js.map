{"version":3,"file":"Photography-legacy.b5e81932.js","sources":["../../src/api/photography.ts","../../src/views/photography/PhotographyBanners.vue","../../src/views/photography/PhotographyTabsContent.vue","../../src/views/photography/PhotographyTabsStores.vue","../../src/views/photography/PhotographyTabs.vue","../../src/views/photography/Photography.vue"],"sourcesContent":["import urlPrefixes from '@/constant/urlPrefixes'\nimport { ResultType } from '@/types/http'\nimport { PositionType } from '@/types/position'\nimport { ajax, getPosition, http } from '@/utils'\nimport qs from 'query-string'\n\nconst api = {\n  getPhotographyConfig: `${urlPrefixes.mockApi}/photography-config.json`,\n  getPhotographyInfo: `${urlPrefixes.mockApi}/querySelfPhoto.do`,\n  getPhotographyStores: `${urlPrefixes.mockApi}/store/selfPhotographyStoreList.do`,\n  getMinPriceSpu: `${urlPrefixes.mockApi}/api/spu/queryMinPriceSpuByTheme.do`\n}\n\nexport async function getPhotographyConfig() {\n  try {\n    const result: ResultType<any> = await ajax.get(\n      `${api.getPhotographyConfig}`\n    )\n    const { data, code } = result\n    if (+code === 0) {\n      return data || {}\n    } else {\n      return {}\n    }\n  } catch (e) {\n    return {}\n  }\n}\n\nexport async function getPhotographyInfo() {\n  try {\n    const result: ResultType<any> = await http.post(\n      `${api.getPhotographyInfo}`,\n      {\n        cityId: '320100',\n        level3CategoryId: [101215]\n      }\n    )\n    const { data, code } = result\n    if (+code === 1) {\n      return data || {}\n    } else {\n      return {}\n    }\n  } catch (e) {\n    return {}\n  }\n}\n\nexport async function getPhotographyStores() {\n  try {\n    const position: PositionType | null = await getPosition()\n    const params = {\n      cityCode: '320100',\n      lng: position ? position.lng : '',\n      lat: position ? position.lat : ''\n    }\n    const result: ResultType<any[]> = await http.get(\n      `${api.getPhotographyStores}?${qs.stringify(params)}`\n    )\n    const { data, code } = result\n    if (+code === 1) {\n      return data || []\n    } else {\n      return []\n    }\n  } catch (e) {\n    return []\n  }\n}\n\nexport async function getMinPriceSpu(themeId?: number) {\n  try {\n    const params = {\n      // cityId: getSelectedCityId(),\n      cityId: '320100',\n      themeId\n    }\n    const result: ResultType<any> = await http.get(\n      `${api.getMinPriceSpu}?${qs.stringify(params)}`\n    )\n    const { data, code } = result\n    if (+code === 1) {\n      return data || {}\n    } else {\n      return {}\n    }\n  } catch (e) {\n    return {}\n  }\n}\n","<template>\n  <VanSwipe class=\"banners\" :autoplay=\"5000\" :show-indicators=\"false\">\n    <VanSwipeItem\n      v-for=\"(item, index) in banners\"\n      :key=\"index\"\n      @click=\"bannerClick(item, index)\"\n    >\n      <BaseImg :src=\"item.img\" width=\"750\" height=\"148\" />\n    </VanSwipeItem>\n  </VanSwipe>\n</template>\n<script lang=\"ts\" setup>\nimport { PropType } from 'vue'\nimport { Swipe as VanSwipe, SwipeItem as VanSwipeItem } from 'vant'\n\ndefineProps({\n  banners: {\n    type: Array as PropType<any[]>,\n    default() {\n      return []\n    }\n  }\n})\n\nconst bannerClick = (banner: any, index: number) => {\n  if (banner.link) {\n    location.href = banner.link\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.banners {\n  height: 148px;\n}\n</style>\n","<template>\n  <div class=\"tabs-content\">\n    <div v-if=\"showTabName\" class=\"content-title pf-simbold\">{{ tabname }}</div>\n    <div v-if=\"themes.length > 0\" class=\"themes\">\n      <div v-for=\"item in themes\" :key=\"item.themeId\" class=\"theme\">\n        <div class=\"theme-title pf-medium\">\n          {{ item.themeName }}（{{\n            item.themePics ? item.themePics.length : 0\n          }}）\n        </div>\n        <div class=\"theme-pics\">\n          <BaseImg\n            v-for=\"(item2, index2) in item.themePics\"\n            :key=\"index2\"\n            class=\"theme-pic\"\n            width=\"210\"\n            height=\"280\"\n            :src=\"item2\"\n            @click=\"themePicClick(item, index2)\"\n          />\n        </div>\n      </div>\n    </div>\n    <div v-if=\"products.length > 0\" class=\"products\">\n      <div class=\"products-title pf-medium\"><i></i>套餐推荐</div>\n      <div class=\"products-list\">\n        <a\n          v-for=\"item in products\"\n          :key=\"item.spuId\"\n          class=\"product\"\n          :href=\"getProductUrl(item)\"\n        >\n          <div class=\"product-detail\">\n            <BaseImg\n              class=\"product-image\"\n              width=\"120\"\n              height=\"120\"\n              :src=\"item.cmmdtyImage\"\n            />\n            <div class=\"product-info\">\n              <div class=\"product-title\">{{ item.spuName }}</div>\n              <div\n                v-if=\"getPhotonumText(item.photoItem)\"\n                class=\"product-photonum\"\n              >\n                {{ getPhotonumText(item.photoItem) }}\n              </div>\n              <ProductPrice class=\"product-price-wrap\" :price=\"item.minPrice\" />\n            </div>\n            <div class=\"product-btn pf-medium\">查看详情</div>\n          </div>\n          <div v-if=\"getRecommendDesc(item)\" class=\"product-recommend\">\n            <div class=\"product-recommend-icon\">\n              <i></i><span class=\"pf-medium\">推荐</span>\n            </div>\n            <div class=\"product-recommend-text\">\n              {{ getRecommendDesc(item) }}\n            </div>\n          </div>\n        </a>\n      </div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { inject, PropType, Ref, ref, toRefs } from 'vue'\n\nconst props = defineProps({\n  showTabName: {\n    type: Boolean,\n    default() {\n      return true\n    }\n  },\n  tabname: {\n    type: String,\n    default: ''\n  },\n  themes: {\n    type: Array as PropType<any[]>,\n    default() {\n      return []\n    }\n  },\n  products: {\n    type: Array as PropType<any[]>,\n    default() {\n      return []\n    }\n  }\n})\nconst { tabname } = toRefs(props)\n\nconst emit = defineEmits(['theme-pic-click'])\n\nconst photographyConfig: Ref<any> = inject('photographyConfig', ref({}))\n\nconst getProductGiveNegatives = (product: any) => {\n  try {\n    if (product && product.photoItem) {\n      const items: any[] = JSON.parse(product.photoItem)\n      const maxItem = items.reduce((item1, item2) => {\n        if (item1.isGiveNegatives == undefined) {\n          return item2\n        } else if (item2.isGiveNegatives == undefined) {\n          return item1\n        } else {\n          return item1.isGiveNegatives > item2.isGiveNegatives ? item1 : item2\n        }\n      }, {})\n      return maxItem.isGiveNegatives\n    } else {\n      return undefined\n    }\n  } catch (e) {\n    return undefined\n  }\n}\n\nconst getPhotonumText = (photoItem: string) => {\n  if (photoItem) {\n    try {\n      const items: any[] = JSON.parse(photoItem)\n      if (items.length > 0) {\n        const photeRepairNum = items[0].photeRepairNum\n        const photoNum = items[0].photoNum\n        return `拍摄≥${photoNum}张 | ${photeRepairNum}张精修`\n      }\n    } catch (e) {\n      console.error(e)\n    }\n  }\n  return ''\n}\n\nconst getRecommendDesc = (product: any) => {\n  const negativesGiveDescs = photographyConfig.value.negativesGiveDescs || {}\n  const maxNegativesGive = getProductGiveNegatives(product)\n  return maxNegativesGive && negativesGiveDescs[maxNegativesGive]\n}\n\nconst getProductUrl = (product: any) => {\n  return `/xbuy-event/1`\n}\n\nconst themePicClick = (theme: any, picIndex: number) => {\n  emit('theme-pic-click', theme, picIndex)\n}\n</script>\n<style lang=\"scss\" scoped>\n.tabs-content {\n  overflow: hidden;\n  background: linear-gradient(180deg, #fff7f4, #ffffff 21%, #ffffff);\n  & > div:last-child {\n    margin-bottom: 32px;\n  }\n  .content-title {\n    position: relative;\n    font-size: 32px;\n    color: #451a0c;\n    text-align: center;\n    line-height: 64px;\n    padding-top: 20px;\n    background: url('@/assets/images/photography/bg-title.png') 0 0/100% auto\n      no-repeat;\n  }\n  .themes {\n    .theme {\n      .theme-title {\n        padding: 40px 24px 24px;\n        overflow: hidden;\n        font-size: 30px;\n        line-height: 36px;\n        @include ellipsis;\n      }\n      .theme-pics {\n        display: flex;\n        overflow-x: auto;\n        &::-webkit-scrollbar {\n          display: none;\n        }\n        .theme-pic {\n          flex: none;\n          margin-right: 20px;\n          &:first-child {\n            padding-left: 24px;\n          }\n          &:last-child {\n            margin-right: 0;\n            padding-right: 24px;\n          }\n          & :deep(img) {\n            border-radius: 16px;\n          }\n        }\n      }\n    }\n  }\n  .products {\n    background: url('@/assets/images/photography/bg-products.png') 0 0/100% auto\n      no-repeat;\n    .products-title {\n      display: flex;\n      align-items: center;\n      padding: 48px 24px 24px;\n      color: #262626;\n      line-height: 36px;\n      font-size: 30px;\n      i {\n        display: block;\n        width: 36px;\n        height: 36px;\n        background: url('@/assets/images/photography/icon-recommend.png') 0 0/100%\n          auto no-repeat;\n        margin-right: 8px;\n      }\n    }\n    .products-list {\n      margin: 0 24px;\n      background: #ffffff;\n      box-shadow: 0px 0px 16px 0px rgba(0, 0, 0, 0.08);\n      border-radius: 16px;\n      .product {\n        display: block;\n        padding: 24px 0;\n        margin: 0 20px;\n        &:not(:last-child) {\n          border-bottom: 1px solid #ededed;\n        }\n        .product-detail {\n          display: flex;\n          position: relative;\n          .product-image {\n            border-radius: 8px;\n            overflow: hidden;\n          }\n          .product-info {\n            flex: 1;\n            padding: 0 20px;\n            overflow: hidden;\n            .product-title {\n              font-size: 26px;\n              line-height: 32px;\n              margin-bottom: 8px;\n              color: #121212;\n              @include ellipsis;\n            }\n            .product-photonum {\n              font-size: 20px;\n              color: #444444;\n              line-height: 32px;\n              margin-bottom: 4px;\n              @include ellipsis;\n            }\n            .product-price-wrap {\n              height: 44px;\n            }\n          }\n          .product-btn {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 26px;\n            color: #ff5900;\n            line-height: 30px;\n            position: absolute;\n            right: 0;\n            bottom: 0;\n            width: 152px;\n            height: 60px;\n            /* 圆角渐变边框 */\n            box-sizing: border-box;\n            border-radius: 30px;\n            /* prettier-ignore */\n            padding: 1Px;\n            background-image: linear-gradient(#ffffff, #ffffff),\n              linear-gradient(270deg, #ff5900, #ff8800);\n            background-clip: content-box, padding-box;\n          }\n        }\n        .product-recommend {\n          display: flex;\n          align-items: center;\n          flex-wrap: nowrap;\n          overflow: hidden;\n          margin-top: 10px;\n          border-radius: 4px;\n          .product-recommend-icon {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: 120px;\n            height: 40px;\n            background: #ffe9b4;\n            border-radius: 4px;\n            i {\n              display: block;\n              width: 28px;\n              height: 28px;\n              background: url('@/assets/images/photography/icon-good.png') 0 0/100%\n                100% no-repeat;\n              margin-right: 8px;\n            }\n            span {\n              font-size: 22px;\n              color: #ff5900;\n              line-height: 24px;\n            }\n          }\n          .product-recommend-text {\n            padding: 0 24px;\n            font-size: 22px;\n            color: #ff8800;\n            height: 40px;\n            line-height: 40px;\n            background: #fff6e2;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"tabs-stores\">\n    <div class=\"stores-title pf-medium\">拍摄门店</div>\n    <a\n      v-for=\"item in stores\"\n      :key=\"item.storeId\"\n      class=\"store\"\n      :href=\"getShopUrl(item)\"\n    >\n      <div class=\"store-icon\"></div>\n      <div class=\"store-info\">\n        <div class=\"store-title pf-simbold\">{{ item.shortName }}</div>\n        <div class=\"store-address\">{{ item.addressStreet }}</div>\n        <div v-if=\"item.distance >= 0\" class=\"store-distance\">\n          距您 {{ getDistanceKm(item.distance) }} km\n        </div>\n      </div>\n      <div class=\"store-btn\"></div>\n      <div class=\"store-divider\"></div>\n    </a>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { getDistanceKm } from '@/utils'\nimport { PropType } from 'vue'\n\ndefineProps({\n  stores: {\n    type: Array as PropType<any[]>,\n    default() {\n      return []\n    }\n  }\n})\n\nconst getShopUrl = (store: any) => {\n  return '/xbuy-event/1'\n}\n</script>\n<style lang=\"scss\" scoped>\n.tabs-stores {\n  background: #ffffff;\n  .stores-title {\n    margin: 0 24px;\n    padding: 32px 0 24px;\n    color: #121212;\n    line-height: 36px;\n    font-size: 30px;\n    border-bottom: 1px solid #ededed;\n  }\n  .store {\n    padding: 24px 24px 0;\n    display: flex;\n    position: relative;\n    .store-icon {\n      width: 34px;\n      height: 34px;\n      background: url('@/assets/images/photography/icon-address.png')\n        center/28px 28px no-repeat;\n      margin-right: 12px;\n    }\n    .store-info {\n      flex: 1;\n      padding-right: 36px;\n      padding-bottom: 24px;\n      overflow: hidden;\n      border-bottom: 1px solid #ededed;\n      .store-title {\n        font-size: 28px;\n        color: #121212;\n        line-height: 34px;\n        margin-bottom: 16px;\n        @include ellipsis;\n      }\n      .store-address {\n        font-size: 26px;\n        color: #262626;\n        line-height: 32px;\n        margin-bottom: 12px;\n        @include ellipsis;\n      }\n      .store-distance {\n        font-size: 26px;\n        color: #999999;\n        line-height: 32px;\n      }\n    }\n    .store-btn {\n      position: absolute;\n      top: 50%;\n      right: 24px;\n      transform: translateY(-50%);\n      width: 36px;\n      height: 36px;\n      background: url('@/assets/images/photography/icon-more.png') 0 0/100% 100%\n        no-repeat;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"tabs\">\n    <VanTabs\n      v-model:active=\"selectedTab\"\n      style=\"--fix-bg: #ffffff\"\n      title-active-color=\"#ff5900\"\n      :swipe-threshold=\"4\"\n      :ellipsis=\"false\"\n      border\n      scrollspy\n      sticky\n    >\n      <VanTab\n        v-for=\"(item, index) in showTabs\"\n        :key=\"item.level4Category\"\n        :title=\"item.level4Category\"\n      >\n        <TabsContent\n          class=\"tabs-content-wrap\"\n          :show-tab-name=\"index > 0\"\n          :tabname=\"item.level4Category\"\n          :themes=\"item.themes\"\n          :products=\"item.cmmdtyInfo\"\n          @theme-pic-click=\"showThemeDetail\"\n        ></TabsContent>\n      </VanTab>\n      <VanTab v-if=\"stores && stores.length > 0\" title=\"拍摄门店\">\n        <TabsStores :stores=\"stores\"></TabsStores>\n      </VanTab>\n    </VanTabs>\n    <!-- 主题详情 -->\n    <VanImagePreview.Component\n      id=\"image-preview\"\n      v-model:show=\"themeDetailShow\"\n      :images=\"themeDetailImages\"\n      :start-position=\"selectedThemeImageStart\"\n      :close-on-popstate=\"false\"\n      teleport=\"body\"\n      @change=\"themeDetailImageChange\"\n    >\n      <template #index>\n        <span class=\"pf-medium\">{{ themeDetailImageIndex + 1 }}</span>\n        <span class=\"pf-medium gray\">/{{ themeDetailImages.length }}</span>\n      </template>\n      <template #cover>\n        <!-- 主题商品显示 -->\n        <template v-if=\"themeDetailProduct\">\n          <ProductCell :product-info=\"themeDetailProduct\"></ProductCell>\n          <div class=\"menu_wkBox_back_box\"></div>\n        </template>\n      </template>\n    </VanImagePreview.Component>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport {\n  nextTick,\n  PropType,\n  computed,\n  Ref,\n  ref,\n  toRefs,\n  watch,\n  watchEffect\n} from 'vue'\nimport {\n  Tabs as VanTabs,\n  Tab as VanTab,\n  ImagePreview as VanImagePreview\n} from 'vant'\nimport TabsContent from './PhotographyTabsContent.vue'\nimport TabsStores from './PhotographyTabsStores.vue'\nimport { getMinPriceSpu } from '@/api/photography'\n\nconst props = defineProps({\n  tabs: {\n    type: Array as PropType<any[]>,\n    default() {\n      return []\n    }\n  },\n  stores: {\n    type: Array as PropType<any[]>,\n    default() {\n      return []\n    }\n  }\n})\n\nconst getProductGiveNegatives = (product: any) => {\n  try {\n    if (product && product.photoItem) {\n      const items: any[] = JSON.parse(product.photoItem)\n      const maxItem = items.reduce((item1, item2) => {\n        if (item1.isGiveNegatives == undefined) {\n          return item2\n        } else if (item2.isGiveNegatives == undefined) {\n          return item1\n        } else {\n          return item1.isGiveNegatives > item2.isGiveNegatives ? item1 : item2\n        }\n      }, {})\n      return maxItem.isGiveNegatives\n    } else {\n      return undefined\n    }\n  } catch (e) {\n    return undefined\n  }\n}\n\nconst { selectedTab, showTabs } = ((props: any) => {\n  // 商品顺序调整，整体顺序不变的同时底片全送推荐在前\n  function sortProducts(products: any[]) {\n    let i = 0\n    for (const index in products) {\n      const product = products[index]\n      if (getProductGiveNegatives(product) == '1') {\n        if (Number(index) > i) {\n          products.splice(Number(index), 1)\n          products.splice(i, 0, product)\n        }\n        i++\n      }\n    }\n  }\n\n  const { tabs } = toRefs(props)\n  const selectedTab = ref(0) //所选tab\n  const showTabs: Ref<any[]> = computed(() => {\n    // 过滤无商品tab\n    return tabs.value.filter((item: any) => {\n      if (item.cmmdtyInfo && item.cmmdtyInfo.length > 0) {\n        sortProducts(item.cmmdtyInfo)\n        return true\n      } else {\n        return false\n      }\n    })\n  })\n  return { selectedTab, showTabs }\n})(props)\n\nconst {\n  selectedThemeImageStart,\n  themeDetailShow,\n  themeDetailImages,\n  showThemeDetail,\n  themeDetailImageIndex,\n  themeDetailImageChange,\n  themeDetailProduct\n} = (() => {\n  /* 在每张图片上创建图片详情 */\n  function refreshImageDetail() {\n    nextTick(() => {\n      const swipeDoms = document.querySelectorAll(\n        '#image-preview .van-swipe-item'\n      )\n      swipeDoms.forEach((item: Element, index: number) => {\n        const detailDomText = selectedThemeImages.value[index].detailDomText\n        const imageDom = item.querySelector('.van-image-preview__image')\n        const exist = imageDom && imageDom.querySelector('.image-detail')\n        if (detailDomText && imageDom && !exist) {\n          try {\n            const detailDom = new DOMParser().parseFromString(\n              detailDomText,\n              'text/html'\n            ).body.childNodes[0]\n            const imageDetail = document.createElement('div')\n            imageDetail.className = 'image-detail'\n            imageDetail.appendChild(detailDom)\n            imageDom.appendChild(imageDetail)\n          } catch (e) {\n            console.error('添加图片详情失败', e)\n          }\n        }\n      })\n    })\n  }\n  /* 删除旧的图片详情DOM */\n  function deleteImageDetail() {\n    const doms = document.querySelectorAll('#image-preview  .image-detail')\n    doms.forEach((item: Element) => {\n      item.remove()\n    })\n  }\n\n  const selectedTheme: Ref<any> = ref(null) //所选主题\n  const selectedThemeImages: Ref<any[]> = computed(() => {\n    const theme = selectedTheme.value\n    if (theme && theme.themePics) {\n      return theme.themePics.map((item: any) => {\n        return {\n          imgUrl: item,\n          detailDomText: `<div class=\"theme-title pf-medium\">${theme.themeName}</div>` //每张图片上面需要显示的图片详情\n        }\n      })\n    } else {\n      return []\n    }\n  }) //所选主题图片\n  const selectedThemeImageStart = ref(0) //所选主题图片索引\n  const themeDetailShow = ref(false) //是否显示主题详情\n  watch(themeDetailShow, () => {\n    if (themeDetailShow.value) {\n      setTimeout(() => {\n        refreshImageDetail()\n      }, 200)\n    } else {\n      deleteImageDetail()\n    }\n  })\n  const themeDetailImages = computed(() => {\n    return selectedThemeImages.value.map(item => item.imgUrl)\n  })\n  const themeDetailImageIndex = ref(0)\n  const themeDetailImageChange = (index: number) => {\n    themeDetailImageIndex.value = index\n    refreshImageDetail()\n  }\n  const showThemeDetail = (theme: any, picIndex: number) => {\n    selectedTheme.value = theme\n    selectedThemeImageStart.value = picIndex\n    themeDetailImageIndex.value = picIndex\n    themeDetailShow.value = true\n  }\n  const themeDetailProduct: Ref<any | null> = ref(null)\n  watchEffect(async () => {\n    const themeId = selectedTheme.value && selectedTheme.value.themeId\n    if (themeId) {\n      themeDetailProduct.value = await getMinPriceSpu(themeId)\n    }\n  })\n  return {\n    selectedThemeImageStart,\n    themeDetailShow,\n    themeDetailImages,\n    showThemeDetail,\n    themeDetailImageIndex,\n    themeDetailImageChange,\n    themeDetailProduct\n  }\n})()\n</script>\n<style lang=\"scss\" scoped>\n.tabs {\n  .van-tabs > :deep(div) {\n    .van-sticky {\n      .van-tabs__wrap {\n        height: 88px;\n        &[class*='van-hairline']::after {\n          border-top: none;\n        }\n        .van-tabs__nav {\n          background: transparent;\n          padding: 0;\n          .van-tab {\n            padding: 0 24px;\n            .van-tab__text {\n              font-size: 32px;\n              font-weight: 500;\n              line-height: 1;\n            }\n          }\n          .van-tab:not(:nth-last-of-type(2))::after {\n            content: '';\n            display: block;\n            position: absolute;\n            top: 50%;\n            /* prettier-ignore */\n            right: 1Px;\n            transform: translateY(-50%);\n            /* prettier-ignore */\n            width: 1Px;\n            height: 30px;\n            background: #dedede;\n            border-radius: 2px;\n          }\n          .van-tab.van-tab--active {\n            .van-tab__text {\n              font-weight: 600;\n            }\n          }\n          .van-tabs__line {\n            width: 28px;\n            height: 6px;\n            background-image: linear-gradient(243deg, #ff5900 5%, #ff8800 100%);\n            border-radius: 3px;\n            bottom: 12px;\n          }\n        }\n      }\n    }\n    .van-sticky--fixed {\n      .van-tabs__wrap {\n        .van-tabs__nav {\n          background: #ffffff;\n        }\n      }\n    }\n  }\n  .van-tabs > :deep(.van-tabs__content) {\n    .van-tab__pane:not(:first-child) {\n      .tabs-content-wrap .theme:first-child {\n        .theme-title {\n          padding-top: 20px;\n        }\n      }\n    }\n    .van-tab__pane:not(:first-child) {\n      padding-top: 20px;\n    }\n  }\n}\n</style>\n<style lang=\"scss\">\n#image-preview {\n  display: flex;\n  flex-direction: column;\n  height: auto;\n  bottom: 0;\n  .van-image-preview__swipe {\n    height: auto;\n    flex: 1;\n    .van-image-preview__image {\n      // 图片详情动态添加\n      .image-detail {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        overflow: hidden;\n        .theme-title {\n          height: 168px;\n          padding: 101px 24px 31px;\n          box-sizing: border-box;\n          background-image: linear-gradient(\n            180deg,\n            rgba(0, 0, 0, 0),\n            rgba(0, 0, 0, 0.13) 24%,\n            rgba(0, 0, 0, 0.8)\n          );\n          font-size: 30px;\n          color: #ffffff;\n          line-height: 36px;\n          @include ellipsis;\n        }\n      }\n    }\n    .van-image-preview__image.van-image-preview__image--vertical {\n      img {\n        width: auto;\n      }\n    }\n  }\n  .van-image-preview__index {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    transform: none;\n    line-height: initial;\n    text-shadow: none;\n    text-align: center;\n    height: 88px;\n    line-height: 88px;\n    font-size: 36px;\n    color: #ffffff;\n    .gray {\n      color: #999999;\n    }\n  }\n  .van-image-preview__cover {\n    position: relative;\n    background: #ffffff;\n  }\n}\n</style>\n","<template>\n  <div class=\"photography\">\n    <div v-if=\"photographyConfig.brand\" class=\"brand-wrap\">\n      <img :src=\"photographyConfig.brand\" />\n    </div>\n    <Banners\n      v-if=\"photographyData.ads && photographyData.ads.length > 0\"\n      class=\"banners-wrap\"\n      :banners=\"photographyData.ads\"\n    />\n    <Tabs\n      v-if=\"photographyData.content && photographyData.content.length > 0\"\n      class=\"tabs-wrap\"\n      :tabs=\"photographyData.content\"\n      :stores=\"photographyStores\"\n    />\n    <div v-if=\"photographyConfig.flow\" class=\"flow-wrap\">\n      <img :src=\"photographyConfig.flow\" />\n    </div>\n    <div class=\"menu_wkBox_back_box\"></div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport {\n  getPhotographyConfig,\n  getPhotographyInfo,\n  getPhotographyStores\n} from '@/api/photography'\nimport { onMounted, provide, Ref, ref } from 'vue'\nimport Banners from './PhotographyBanners.vue'\nimport Tabs from './PhotographyTabs.vue'\n\nconst photographyConfig: Ref<any> = ref({})\nconst photographyData: Ref<any> = ref({})\nconst photographyStores: Ref<any[]> = ref([])\nonMounted(async () => {\n  photographyConfig.value = await getPhotographyConfig()\n  getPhotographyInfo().then(data => {\n    photographyData.value = data\n  })\n  getPhotographyStores().then(data => {\n    photographyStores.value = data\n  })\n})\n\nprovide('photographyConfig', photographyConfig)\n</script>\n<style lang=\"scss\" scoped>\n.photography {\n  & :deep(img) {\n    pointer-events: none;\n  }\n  .brand-wrap {\n    margin-bottom: 10px;\n    img {\n      width: 750px;\n      height: auto;\n      display: block;\n    }\n  }\n  .banners-wrap {\n    margin-bottom: 8px;\n  }\n  .tabs-wrap {\n    margin-bottom: 16px;\n  }\n  .flow-wrap {\n    img {\n      width: 750px;\n      height: auto;\n      display: block;\n    }\n  }\n}\n</style>\n"],"names":["api","getPhotographyConfig","urlPrefixes","mockApi","getPhotographyInfo","getPhotographyStores","getMinPriceSpu","ajax","get","result","data","code","http","post","cityId","level3CategoryId","getPosition","position","params","cityCode","lng","lat","qs","stringify","themeId","banner","link","href","tabname","toRefs","photographyConfig","inject","ref","getPhotonumText","photoItem","items","JSON","parse","length","photeRepairNum","photoNum","e","error","getRecommendDesc","product","negativesGiveDescs","value","maxNegativesGive","reduce","item1","item2","isGiveNegatives","getProductGiveNegatives","tabs","selectedTab","showTabs","computed","filter","item","cmmdtyInfo","products","i","index","Number","splice","document","querySelectorAll","forEach","detailDomText","selectedThemeImages","imageDom","querySelector","exist","detailDom","DOMParser","parseFromString","body","childNodes","imageDetail","createElement","className","appendChild","selectedTheme","theme","themePics","map","imgUrl","themeName","selectedThemeImageStart2","themeDetailShow2","remove","themeDetailImages2","themeDetailImageIndex2","themeDetailProduct2","selectedThemeImageStart","themeDetailShow","themeDetailImages","showThemeDetail","picIndex","themeDetailImageIndex","themeDetailImageChange","themeDetailProduct","photographyData","photographyStores","then"],"mappings":"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"}