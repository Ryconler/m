{"version":3,"file":"shareService-legacy.fbe36ce7.js","sources":["../../src/api/shareService.ts"],"sourcesContent":["import urlPrefixes from '@/constant/urlPrefixes'\nimport { ajax, http } from '@/utils'\nimport jsCookie from 'js-cookie'\nimport qs from 'query-string'\nimport { ResultType } from '@/types/http'\nimport { SpuMaterialType } from '@/constant/shareService'\n\nconst api = {\n  queryShareTask: `${urlPrefixes.mockApi}/soperation-api/shareTask/queryShareTaskByCity.do`,\n  queryShareSpus: `${urlPrefixes.mockApi}/queryAggregate.do`,\n  queryShareActivities: `${urlPrefixes.mockApi}/ias-web/ifsia/activityListForTab.do`,\n  queryAllActivities: `${urlPrefixes.mockApi}/ias-web/ifsia/activityListForApp.do`,\n  queryShareInsurances: `${urlPrefixes.mockApi}/insp/channel/item/list`\n}\n\nexport async function queryShareTask(cityId: string | number): Promise<{\n  rotationPicList?: { rotationPic: string; jumpUrl: string }[]\n  shareTaskList?: any[]\n}> {\n  try {\n    // http://mytest.kapi.haiziwang.com:3003/project/1692/interface/api/45781\n    const result: ResultType<{\n      rotationPicList: { rotationPic: string; jumpUrl: string }[]\n      shareTaskList: any[]\n    }> = await ajax.get(`${api.queryShareTask}?cityId=${cityId}`)\n    const { data, code } = result\n    if (+code === 1) {\n      return data || {}\n    } else {\n      return {}\n    }\n  } catch (e) {\n    return {}\n  }\n}\n\nexport async function queryShareSpus(params: any) {\n  try {\n    // http://mytest.kapi.haiziwang.com:3003/project/1786/interface/api/26279\n    const result: ResultType<any> = await ajax.post(api.queryShareSpus, params)\n    const { data, code, msg } = result\n    if (+code === 1) {\n      return data || {}\n    } else {\n      throw msg\n    }\n  } catch (e) {\n    console.error(e)\n    throw e\n  }\n}\n\nexport async function queryShareInsurances(): Promise<{\n  ItemList: any[]\n}> {\n  try {\n    const uid = jsCookie.get('uid')\n    const skey = jsCookie.get('skey')\n    const param = qs.stringify({\n      uid,\n      skey,\n      channelKey: 'kw-yk'\n    })\n    const result: ResultType<{ ItemList: any[] }> = await http.get(\n      `${api.queryShareInsurances}?${param}`\n    )\n    const { data, code, msg } = result\n    if (+code === 1001) {\n      return data || {}\n    } else {\n      throw msg\n    }\n  } catch (e) {\n    console.error(e)\n    throw e\n  }\n}\n\nexport async function queryShareActivities(params: {\n  cityCode: string | number\n  storeCode?: string\n  lat?: string\n  lng?: string\n}) {\n  try {\n    const param = JSON.stringify(params)\n    const result: ResultType<any> = await http.get(\n      `${api.queryShareActivities}?param=${param}`\n    )\n    const { data, code, msg } = result\n    if (code == '1') {\n      return (data && data.list) || []\n    } else {\n      throw msg\n    }\n  } catch (e) {\n    console.error(e)\n    throw e\n  }\n}\n\nexport async function queryAllActivities(params: { storeCode: string }) {\n  try {\n    const param = JSON.stringify(params)\n    const result: ResultType<any> = await http.get(\n      `${api.queryAllActivities}?param=${param}`\n    )\n    const { data, code } = result\n    if (code == '1') {\n      return (data && data.list) || []\n    } else {\n      return []\n    }\n  } catch (e) {\n    console.error(e)\n    return []\n  }\n}\n"],"names":["api","queryShareTask","urlPrefixes","mockApi","queryShareSpus","queryShareActivities","queryAllActivities","queryShareInsurances","cityId","ajax","get","result","data","code","params","post","msg","error","uid","jsCookie","skey","param","qs","stringify","channelKey","http","JSON","list"],"mappings":"0tBAOA,IAAMA,EAAM,CACVC,yBAAmBC,EAAYC,6DAC/BC,yBAAmBF,EAAYC,8BAC/BE,+BAAyBH,EAAYC,gDACrCG,6BAAuBJ,EAAYC,gDACnCI,+BAAyBL,EAAYC,gGAGFK,oHAStBC,EAAKC,cAAOV,EAAIC,kCAAyBO,cAH9CG,SAIEC,EAAeD,EAAfC,KACM,IADSD,EAATE,8CAELD,GAAQ,oCAER,uFAGF,iJAI0BE,wHAGKL,EAAKM,KAAKf,EAAII,eAAgBU,aAA9DH,SACEC,EAAoBD,EAApBC,KAAMC,EAAcF,EAAdE,KAAMG,EAAQL,EAARK,IACN,IAATH,2CACID,GAAQ,iBAETI,0EAGAC,kRASFC,EAAMC,EAAST,IAAI,OACnBU,EAAOD,EAAST,IAAI,QACpBW,EAAQC,EAAGC,UAAU,CACzBL,IAAAA,EACAE,KAAAA,EACAI,WAAY,mBAEwCC,EAAKf,cACtDV,EAAIO,iCAAwBc,cAD3BV,SAGEC,EAAoBD,EAApBC,KAAMC,EAAcF,EAAdE,KAAMG,EAAQL,EAARK,IACN,OAATH,4CACID,GAAQ,kBAETI,0EAGAC,8JAK+BH,iHAOjCO,EAAQK,KAAKH,UAAUT,YACSW,EAAKf,cACtCV,EAAIK,uCAA8BgB,cADjCV,SAGEC,EAAoBD,EAApBC,KAAMC,EAAcF,EAAdE,KAAMG,EAAQL,EAARK,IACR,KAARH,4CACMD,GAAQA,EAAKe,MAAS,kBAExBX,0EAGAC,8JAK6BH,6GAE/BO,EAAQK,KAAKH,UAAUT,YACSW,EAAKf,cACtCV,EAAIM,qCAA4Be,cAD/BV,SAGEC,EAAeD,EAAfC,KACI,KADWD,EAATE,+CAEJD,GAAQA,EAAKe,MAAS,qCAEvB,6EAGDV,8BACD"}