!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function c(e){r(i,o,a,c,u,"next",e)}function u(e){r(i,o,a,c,u,"throw",e)}c(void 0)}))}}System.register(["./storage-legacy.def7d2f9.js","./storage-legacy.8cd6be51.js"],(function(e){"use strict";var n,r;return{setters:[function(e){n=e.S},function(e){r=e.l}],execute:function(){e("g",(function(){return l.apply(this,arguments)}));var a=function(e,t,n){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");"function"==typeof t&&(n=t,t={}),t=t||{},n=n||function(){},o.type=t.type||"text/javascript",o.charset=t.charset||"utf8",o.async=!("async"in t)||!!t.async,o.src=e,t.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(o,t.attrs),t.text&&(o.text=""+t.text),("onload"in o?i:c)(o,n),o.onload||i(o,n),r.appendChild(o)};function i(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function c(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}function u(){return s.apply(this,arguments)}function s(){return(s=o(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return new Promise((function(e,t){window.AMap&&window.AMap.Map?e(window.AMap):a("//webapi.amap.com/maps?v=1.4.15&key=c740e64858e21be917b7a68d264f60bd&callback=onAMapLoaded",(function(n){n?t(null):window.onAMapLoaded=function(){e(window.AMap)}}))}))},e.next=3,t();case 3:return n=e.sent,e.abrupt("return",new Promise((function(e,t){try{if(n)new n.Map("iCenter").plugin("AMap.Geolocation",(function(){var r=new n.Geolocation({enableHighAccuracy:!0,timeout:5e3,buttonOffset:new n.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"});r.getCurrentPosition(),n.event.addListener(r,"complete",(function(t){if(console.log("geolocation",t),t&&t.addressComponent&&t.position){var n=t.addressComponent.adcode,r=t.addressComponent.city,o=r?r.replace("å¸‚",""):"",a=t.position.lat,i=t.position.lng;e(n?{cityId:n,cityName:o,lat:a,lng:i}:null)}else e(null)})),n.event.addListener(r,"error",(function(e){console.error("geolocation error",e),t(null)}))}));else e(null)}catch(r){console.error(r),t(null)}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return l=o(regeneratorRuntime.mark((function e(){var o,a,i,c,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.length>0&&void 0!==s[0]?s[0]:30,e.prev=1,a=r.getItem(n.Position),i=Date.now(),!a){e.next=14;break}if(!(i-a.time<60*o*1e3)){e.next=9;break}c=a,e.next=12;break;case 9:return e.next=11,u();case 11:c=e.sent;case 12:e.next=17;break;case 14:return e.next=16,u();case 16:c=e.sent;case 17:return c&&r.setItem(n.Position,t(t({},c),{},{time:Date.now()})),e.abrupt("return",c);case 21:return e.prev=21,e.t0=e.catch(1),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[1,21]])}))),l.apply(this,arguments)}}}}))}();
//# sourceMappingURL=position-legacy.b83ee2c0.js.map
